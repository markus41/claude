# ============================================================================
# JIRA ORCHESTRATOR - ENVIRONMENT CONFIGURATION
# ============================================================================
# Copy this file to .env and configure all required values
# The plugin will NOT function without proper configuration
# Version: 7.5.0 (Database Integration)
# ============================================================================

# ----------------------------------------------------------------------------
# ATLASSIAN CONFIGURATION (REQUIRED)
# ----------------------------------------------------------------------------
# Uses Atlassian MCP SSE: claude mcp add --transport sse atlassian https://mcp.atlassian.com/v1/sse
# OAuth authentication is handled by MCP, but REST API token is needed for direct calls

# Atlassian Site URLs
ATLASSIAN_SITE_URL=https://your-domain.atlassian.net
CONFLUENCE_SITE_URL=https://your-domain.atlassian.net/wiki

# Jira API Token (for REST API operations)
# Generate at: https://id.atlassian.com/manage-profile/security/api-tokens
JIRA_API_TOKEN=your-jira-api-token

# Default Jira Project Key (e.g., PROJ, DEV, TEAM)
JIRA_DEFAULT_PROJECT=PROJ

# ----------------------------------------------------------------------------
# DATABASE CONFIGURATION - NEON (PostgreSQL)
# ----------------------------------------------------------------------------
# Neon serverless PostgreSQL for persistent storage
# Sign up: https://neon.tech

# Neon API Key (for management operations)
NEON_API_KEY=your-neon-api-key

# Database Connection URLs
# Format: postgresql://user:password@ep-xxx.region.aws.neon.tech/dbname?sslmode=require
DATABASE_URL=postgresql://user:password@host/database?sslmode=require
NEON_DIRECT_URL=postgresql://user:password@host/database?sslmode=require
NEON_POOLED_URL=postgresql://user:password@host-pooler/database?sslmode=require

# Neon Project/Branch IDs (for management)
NEON_PROJECT_ID=your-project-id
NEON_BRANCH_ID=your-branch-id

# ----------------------------------------------------------------------------
# REDIS CONFIGURATION - UPSTASH
# ----------------------------------------------------------------------------
# Upstash serverless Redis for caching and real-time features
# Sign up: https://upstash.com

# Upstash Redis TCP Connection
UPSTASH_REDIS_URL=rediss://default:token@host:6379

# Upstash Redis REST API (for serverless environments)
UPSTASH_REDIS_REST_URL=https://your-instance.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-rest-token

# ----------------------------------------------------------------------------
# ISSUE HIERARCHY CONFIGURATION
# ----------------------------------------------------------------------------
# Define your organization's issue type hierarchy
# Standard: Initiative -> Epic -> Story -> Task -> Subtask

JIRA_HIERARCHY_L1=Initiative
JIRA_HIERARCHY_L2=Epic
JIRA_HIERARCHY_L3=Story
JIRA_HIERARCHY_L4=Task
JIRA_HIERARCHY_L5=Subtask

# ----------------------------------------------------------------------------
# HARNESS CONFIGURATION (OPTIONAL - For CI/CD Integration)
# ----------------------------------------------------------------------------
# Limited to: Development, CI/CD, Repository, Pipeline operations
# Uses REST API with PAT - NOT MCP

HARNESS_ACCOUNT_ID=your-harness-account-id
HARNESS_API_KEY=pat.your-harness-pat-token
HARNESS_ORG_ID=default
HARNESS_PROJECT_ID=your-project-id

# Harness API Base URL (SaaS or self-hosted)
HARNESS_API_URL=https://app.harness.io

# ----------------------------------------------------------------------------
# SAFETY CONFIGURATION
# ----------------------------------------------------------------------------
# These settings prevent accidental operations on wrong issues

# Require explicit confirmation before ANY Jira write operation
JIRA_REQUIRE_CONFIRMATION=true

# Log all Jira operations for audit
JIRA_AUDIT_LOG=true

# Maximum issues to modify in batch operations (safety limit)
JIRA_MAX_BATCH_SIZE=10

# ----------------------------------------------------------------------------
# TEAM CONFIGURATION
# ----------------------------------------------------------------------------
# Configure team defaults for notifications and assignments

TEAM_SLACK_CHANNEL=#engineering
TEAM_DEFAULT_ASSIGNEE=
NOTIFICATION_ENABLED=true

# ----------------------------------------------------------------------------
# OBSIDIAN VAULT (OPTIONAL - For documentation)
# ----------------------------------------------------------------------------
OBSIDIAN_VAULT_PATH=C:\Users\YourUsername\obsidian

# ----------------------------------------------------------------------------
# TEMPORAL CONFIGURATION - Temporal Cloud
# ----------------------------------------------------------------------------
# Temporal Cloud for durable workflow execution
# Dashboard: https://cloud.temporal.io
# Docs: https://docs.temporal.io

# Temporal Cloud Address (region-specific)
TEMPORAL_ADDRESS=us-west-2.aws.api.temporal.io:7233

# Your namespace (format: namespace-name.account-id)
TEMPORAL_NAMESPACE=your-namespace.xxxxx

# API Key (from Temporal Cloud settings)
# Generate at: Settings > API Keys > Create API Key
TEMPORAL_API_KEY=your-temporal-api-key

# Task queue name (can be customized per environment)
TEMPORAL_TASK_QUEUE=jira-orchestration

# ----------------------------------------------------------------------------
# FEATURE FLAGS
# ----------------------------------------------------------------------------
# Enable/disable major features

FEATURE_DATABASE_ENABLED=true
FEATURE_REDIS_CACHE_ENABLED=true
FEATURE_TEMPORAL_ENABLED=false
FEATURE_REALTIME_SUBSCRIPTIONS=true

{
  "version": "7.1.0",
  "description": "Hook-based automation for Jira Orchestrator with AutoGen-style team coordination",
  "git_hooks": {
    "pre-commit": {
      "enabled": true,
      "script": "hooks/scripts/pre-commit.sh",
      "actions": [
        {
          "name": "validate-commit-message",
          "description": "Ensure commit follows conventional format with Jira key",
          "pattern": "^(feat|fix|docs|style|refactor|test|chore)(\\([A-Z]+-\\d+\\))?!?: .+$",
          "auto_fix": true
        },
        {
          "name": "link-jira-issue",
          "description": "Extract and validate Jira issue from branch/message",
          "extract_from": [
            "branch",
            "message"
          ],
          "update_jira": true
        },
        {
          "name": "run-lint",
          "description": "Run project linters",
          "configurable": true
        }
      ],
      "replaces_commands": [
        "commit",
        "commit-template"
      ]
    },
    "post-commit": {
      "enabled": true,
      "script": "hooks/scripts/post-commit.sh",
      "actions": [
        {
          "name": "sync-to-jira",
          "description": "Update Jira with commit info",
          "add_comment": true,
          "update_fields": [
            "customfield_10200"
          ]
        },
        {
          "name": "track-worklog",
          "description": "Track time from commit timestamps",
          "enabled": false,
          "configurable": true
        },
        {
          "name": "append-pr-progress-note",
          "description": "If a draft PR scaffold exists, append commit progress notes to PR body progress section (never replace full body)",
          "body_update_mode": "append"
        }
      ],
      "replaces_commands": [
        "sync",
        "process-worklogs"
      ]
    },
    "pre-push": {
      "enabled": true,
      "script": "hooks/scripts/pre-push.sh",
      "actions": [
        {
          "name": "validate-branch",
          "description": "Ensure branch follows naming convention"
        },
        {
          "name": "check-tests",
          "description": "Run tests before push",
          "configurable": true
        }
      ]
    },
    "post-merge": {
      "enabled": true,
      "script": "hooks/scripts/post-merge.sh",
      "actions": [
        {
          "name": "update-jira-status",
          "description": "Transition Jira issue on merge",
          "transition_to": "Done",
          "configurable": true
        },
        {
          "name": "generate-docs",
          "description": "Update documentation",
          "targets": [
            "confluence",
            "readme"
          ]
        },
        {
          "name": "notify-team",
          "description": "Send merge notification",
          "channels": [
            "slack",
            "email"
          ],
          "configurable": true
        }
      ],
      "replaces_commands": [
        "docs",
        "notify"
      ]
    }
  },
  "orchestration_hooks": {
    "on-work-start": {
      "trigger": "When /jira:work is invoked",
      "actions": [
        {
          "name": "create-branch",
          "description": "Auto-create feature branch",
          "pattern": "feature/{issue_key}-{slug}",
          "auto": true
        },
        {
          "name": "triage-if-needed",
          "description": "Run triage if issue lacks classification",
          "conditions": [
            "no_labels",
            "no_story_points",
            "no_priority"
          ]
        },
        {
          "name": "prepare-subtasks",
          "description": "Create subtasks if epic/story",
          "conditions": [
            "is_epic",
            "is_story",
            "no_subtasks"
          ]
        },
        {
          "name": "fetch-context",
          "description": "Load related docs, PRs, commits"
        },
        {
          "name": "create-draft-pr-scaffold",
          "description": "When Jira status moves to In Progress, invoke commands/work.md + commands/pr.md draft scaffolding unless issue has no-draft-pr label",
          "conditions": [
            "status_transitioned_to_in_progress",
            "label_not_present:no-draft-pr"
          ]
        }
      ],
      "replaces_commands": [
        "branch",
        "triage",
        "prepare"
      ]
    },
    "on-phase-complete": {
      "trigger": "When orchestration phase completes",
      "actions": [
        {
          "name": "checkpoint",
          "description": "Save progress for resume"
        },
        {
          "name": "sync-jira",
          "description": "Update Jira with phase status"
        },
        {
          "name": "notify-if-blocked",
          "description": "Alert if phase encountered blockers"
        }
      ]
    },
    "on-pr-create": {
      "trigger": "When PR is created via /jira:pr",
      "actions": [
        {
          "name": "auto-review",
          "description": "Run AI code review",
          "enabled": true
        },
        {
          "name": "link-confluence",
          "description": "Add documentation links to PR"
        },
        {
          "name": "request-reviewers",
          "description": "Auto-assign reviewers based on CODEOWNERS"
        },
        {
          "name": "add-labels",
          "description": "Add size/type labels"
        }
      ],
      "replaces_commands": [
        "review",
        "confluence"
      ]
    },
    "on-pr-merge": {
      "trigger": "When PR is merged",
      "actions": [
        {
          "name": "transition-jira",
          "description": "Move issue to Done/Released"
        },
        {
          "name": "generate-release-notes",
          "description": "Add to release notes"
        },
        {
          "name": "trigger-deploy",
          "description": "Start deployment pipeline",
          "configurable": true,
          "environments": [
            "dev",
            "staging"
          ]
        }
      ],
      "replaces_commands": [
        "release",
        "deploy"
      ]
    },
    "on-review-requested": {
      "trigger": "When review is requested",
      "actions": [
        {
          "name": "run-council",
          "description": "Optional: Run agent council review",
          "enabled": false,
          "configurable": true
        }
      ]
    },
    "on-pr-state-update": {
      "trigger": "When PR webhook events arrive (opened, ready-for-review, approved, merged, closed)",
      "actions": [
        {
          "name": "route-pr-jira-transition",
          "description": "Route through hooks/scripts/pr-jira-transition.sh and lib/pr-jira-transition-engine.ts for deterministic transitions"
        },
        {
          "name": "persist-idempotency-hash",
          "description": "Store last applied PR event hash/timestamp/action in Jira issue properties"
        },
        {
          "name": "apply-compensation",
          "description": "If PR closes without merge, transition Jira back to In Progress; support reopen flow"
        }
      ],
      "replaces_commands": [
        "jira:transition",
        "jira:comment"
      ]
    },
    "on-jira-update": {
      "trigger": "When Jira issue summary/description/acceptance criteria/status changes",
      "actions": [
        {
          "name": "sync-draft-pr-checklist",
          "description": "Keep draft PR checklist in sync with Jira context for active draft PRs",
          "conditions": [
            "draft_pr_exists",
            "label_not_present:no-draft-pr"
          ]
        }
      ]
    }
  },
  "scheduled_hooks": {
    "daily": {
      "time": "09:00",
      "timezone": "UTC",
      "actions": [
        {
          "name": "process-worklogs",
          "description": "Sync time tracking"
        },
        {
          "name": "check-sla",
          "description": "Monitor SLA breaches"
        },
        {
          "name": "update-metrics",
          "description": "Refresh dashboards"
        }
      ]
    },
    "weekly": {
      "day": "Monday",
      "time": "08:00",
      "actions": [
        {
          "name": "generate-reports",
          "description": "Weekly summary reports"
        },
        {
          "name": "quality-scan",
          "description": "Tech debt analysis"
        }
      ]
    }
  },
  "configuration": {
    "config_file": ".jira/hooks.yml",
    "example": {
      "hooks": {
        "pre-commit": {
          "run-lint": true,
          "lint-command": "npm run lint"
        },
        "post-merge": {
          "notify-team": true,
          "slack-channel": "#deployments"
        },
        "on-pr-merge": {
          "trigger-deploy": true,
          "deploy-environments": [
            "dev"
          ]
        }
      }
    }
  }
}

# ============================================================================
# Rosa Holdings — Multi-Entity Microsoft Deployment Configuration
# ============================================================================
# Copy to .env and populate before running any /tvs:* commands.
# Secrets should be stored in Azure Key Vault (kv-rosa-holdings) for production.
# This file is committed to source control — NEVER add actual secrets here.
# ============================================================================

# --- Tenant IDs (Azure AD / Entra ID) ---
# Each Rosa Holdings entity operates in its own Microsoft 365 tenant
TVS_TENANT_ID=                          # e.g., 12345678-abcd-1234-abcd-123456789abc
CONSULTING_TENANT_ID=                   # Lobbi Consulting + Medicare Consulting tenant
TAIA_TENANT_ID=                         # TAIA FMO (wind-down tenant, sale June 2026)
MEDIA_TENANT_ID=                        # Media Company tenant

# --- Azure Service Principal (cross-tenant app registration) ---
# Used for programmatic access across tenants via az CLI and Graph API
AZURE_CLIENT_ID=                        # App registration client ID
AZURE_CLIENT_SECRET=                    # App registration client secret (store in Key Vault)
AZURE_SUBSCRIPTION_ID=                  # Azure subscription for shared infrastructure

# --- Dataverse Environment URLs ---
# Used by pac CLI for Power Platform operations
TVS_DATAVERSE_ENV_URL=                  # e.g., https://org12345.crm.dynamics.com
CONSULTING_DATAVERSE_ENV_URL=           # e.g., https://org67890.crm.dynamics.com

# --- Microsoft Graph API ---
# For identity, Teams, SharePoint, Exchange operations
# Either use AZURE_CLIENT_ID/SECRET (app-only) or GRAPH_TOKEN (delegated)
GRAPH_TOKEN=                            # Delegated access token (short-lived, for interactive use)

# --- Microsoft Fabric ---
# For OneLake, lakehouse, notebook, and workspace operations
FABRIC_TOKEN=                           # Fabric REST API bearer token
FABRIC_CAPACITY_ID=                     # e.g., F2 capacity ID for Rosa Holdings

# Populated after running scripts/provision_fabric.py:
TVS_WS_ID=                              # TVS Fabric workspace ID
TVS_LAKEHOUSE_ID=                       # TVS operational lakehouse ID
CONSULTING_WS_ID=                       # Consulting Fabric workspace ID
A3_ARCHIVE_WS_ID=                       # A3 archive workspace ID
CONSOLIDATED_WS_ID=                     # Consolidated holdings workspace ID

# --- Stripe (TVS Billing) ---
# Subscription management for TVS VA platform
STRIPE_SECRET_KEY=                      # sk_test_* for dev, sk_live_* for prod
STRIPE_WEBHOOK_SECRET=                  # whsec_* from Stripe webhook endpoint config
STRIPE_PUBLISHABLE_KEY=                 # pk_test_* or pk_live_*

# TVS Subscription Tiers (created in Stripe dashboard or via API):
# Starter: $360/mo — 20 hours included
# Basic:   $640/mo — 40 hours included
# Advanced: $1,200/mo — 80 hours included

# --- Firebase (A3 Legacy System) ---
# For extracting data from TAIA's A3 Firebase application
# Collections: brokers, commissions, carriers, contacts, activities
FIREBASE_SERVICE_ACCOUNT=               # Base64-encoded service account JSON
                                        # encode: base64 -w0 < service-account.json

# --- Paylocity (HR/Payroll Integration) ---
# For syncing time entries between TVS Dataverse and Paylocity PEO
PAYLOCITY_API_KEY=                      # Paylocity API key
PAYLOCITY_COMPANY_ID=                   # Paylocity company identifier

# --- GitHub ---
# For monorepo operations, Actions, and PR automation
GITHUB_TOKEN=                           # ghp_* personal access token or fine-grained token
GITHUB_ORG=rosa-holdings                # GitHub organization name
GITHUB_REPO=platform                    # Monorepo name

# --- HIPAA Compliance Guard ---
# Must be set to "true" before modifying TVS tenant comms config
# (SharePoint external sharing, Teams policies, Exchange retention)
HIPAA_CONFIRMED=                        # Set to "true" to acknowledge HIPAA requirements

# --- User Principal Names ---
# Key accounts for identity operations
MARKUS_UPN=                             # e.g., markus@tvs-domain.com (Global Admin, #10)

# --- Environment ---
# Controls deployment target (dev/staging/prod)
DEPLOY_ENV=dev                          # dev | staging | prod

# ============================================================================
# Cost Reference (do not set — informational only)
# ============================================================================
# Tier 1 (~$1,349/mo): M365 licenses + basic Azure + F2 Fabric
# Tier 2 (~$2,610/mo): + Power Pages capacity + additional Functions
# Tier 3 (~$5,083/mo): + Premium connectors + expanded Fabric + monitoring
# ============================================================================

# {{project_name}} Environment Configuration
# Generated with FastAPI Backend Plugin
#
# IMPORTANT: Copy this file to .env and update values
# NEVER commit .env file to version control

# ============================================================================
# Application Configuration
# ============================================================================

# Environment: development, staging, production
ENVIRONMENT={{default_environment}}

# Application
APP_NAME={{project_name}}
APP_VERSION={{project_version}}
APP_PORT={{app_port}}

# Logging
LOG_LEVEL={{log_level}}

# API Documentation
ENABLE_DOCS={{enable_docs}}

# ============================================================================
# MongoDB Configuration
# ============================================================================

# MongoDB Connection URL
# Format: mongodb://[username:password@]host[:port][/database][?options]
# Local: mongodb://localhost:27017
# Atlas: mongodb+srv://username:password@cluster.mongodb.net
MONGODB_URL=mongodb://{{mongodb_user}}:{{mongodb_password}}@{{mongodb_host}}:{{mongodb_port}}

# Database name
MONGODB_DB_NAME={{mongodb_db_name}}

# Connection timeout (milliseconds)
MONGODB_TIMEOUT_MS=5000

# Connection pool settings
MONGODB_MIN_POOL_SIZE=10
MONGODB_MAX_POOL_SIZE=50

# ============================================================================
# Security & CORS
# ============================================================================

# Allowed origins for CORS (comma-separated)
# Development: http://localhost:3000,http://localhost:8080
# Production: https://yourdomain.com
CORS_ORIGINS={{cors_origins}}

# CORS settings
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOW_HEADERS=*

# Trusted hosts (comma-separated, empty = all hosts allowed)
# Production: yourdomain.com,api.yourdomain.com
ALLOWED_HOSTS=

# Secret key for JWT and session management (generate with: openssl rand -hex 32)
SECRET_KEY={{secret_key}}

# JWT Configuration
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================================================
# Keycloak OIDC Authentication
# ============================================================================

# Enable Keycloak authentication
KEYCLOAK_ENABLED={{keycloak_enabled}}

# Keycloak server URL (without /auth suffix for newer versions)
KEYCLOAK_URL={{keycloak_url}}

# Keycloak realm name
KEYCLOAK_REALM={{keycloak_realm}}

# Client credentials
KEYCLOAK_CLIENT_ID={{keycloak_client_id}}
KEYCLOAK_CLIENT_SECRET={{keycloak_client_secret}}

# Token validation
KEYCLOAK_VERIFY_TOKEN=true
KEYCLOAK_TOKEN_ALGORITHM=RS256

# Admin user credentials (for Keycloak admin operations)
KEYCLOAK_ADMIN_USERNAME={{keycloak_admin_username}}
KEYCLOAK_ADMIN_PASSWORD={{keycloak_admin_password}}

# ============================================================================
# Redis Cache (Optional)
# ============================================================================

# Redis connection URL
# Format: redis://[username:password@]host[:port][/database]
REDIS_URL=redis://localhost:6379/0

# Redis settings
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_CONNECTIONS=50

# Cache TTL (seconds)
CACHE_TTL=300

# ============================================================================
# Email Configuration (Optional)
# ============================================================================

# SMTP Server
SMTP_HOST={{smtp_host}}
SMTP_PORT={{smtp_port}}
SMTP_USER={{smtp_user}}
SMTP_PASSWORD={{smtp_password}}
SMTP_TLS=true
SMTP_SSL=false

# Email settings
EMAIL_FROM={{email_from}}
EMAIL_FROM_NAME={{email_from_name}}

# ============================================================================
# Task Queue - Celery (Optional)
# ============================================================================

# Celery broker URL (Redis or RabbitMQ)
CELERY_BROKER_URL=redis://localhost:6379/1

# Celery result backend
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# ============================================================================
# External APIs
# ============================================================================

# Example external API
EXTERNAL_API_URL={{external_api_url}}
EXTERNAL_API_KEY={{external_api_key}}
EXTERNAL_API_TIMEOUT=30

# ============================================================================
# Monitoring & Observability (Optional)
# ============================================================================

# Sentry for error tracking
SENTRY_DSN={{sentry_dsn}}
SENTRY_ENVIRONMENT={{default_environment}}
SENTRY_TRACES_SAMPLE_RATE=0.1

# Prometheus metrics
ENABLE_METRICS=false
METRICS_PORT=9090

# ============================================================================
# File Storage (Optional)
# ============================================================================

# Local file storage path
UPLOAD_DIR=/app/uploads
MAX_UPLOAD_SIZE_MB=10

# S3/MinIO Configuration
S3_ENDPOINT={{s3_endpoint}}
S3_ACCESS_KEY={{s3_access_key}}
S3_SECRET_KEY={{s3_secret_key}}
S3_BUCKET_NAME={{s3_bucket_name}}
S3_REGION={{s3_region}}

# ============================================================================
# Rate Limiting (Optional)
# ============================================================================

# Enable rate limiting
ENABLE_RATE_LIMITING=true

# Rate limit: requests per minute
RATE_LIMIT_PER_MINUTE=60

# ============================================================================
# Development Settings
# ============================================================================

# Enable debug mode (NEVER enable in production)
DEBUG={{debug_mode}}

# Enable SQL query logging
LOG_DB_QUERIES=false

# Enable profiling
ENABLE_PROFILING=false

# ============================================================================
# Testing Configuration
# ============================================================================

# Test database
TEST_MONGODB_URL=mongodb://localhost:27017/{{project_name}}_test

# Disable external services in tests
TEST_DISABLE_KEYCLOAK=true
TEST_DISABLE_REDIS=true
TEST_DISABLE_EMAIL=true

# ============================================================================
# Docker Compose Variables
# ============================================================================

# MongoDB Docker settings
MONGO_INITDB_ROOT_USERNAME={{mongodb_root_user}}
MONGO_INITDB_ROOT_PASSWORD={{mongodb_root_password}}

# Keycloak Docker settings
KEYCLOAK_ADMIN={{keycloak_docker_admin}}
KEYCLOAK_ADMIN_PASSWORD={{keycloak_docker_admin_password}}

# ============================================================================
# Security Notes
# ============================================================================

# 1. Generate strong SECRET_KEY: openssl rand -hex 32
# 2. Use environment-specific .env files (.env.development, .env.production)
# 3. Never commit .env files to version control
# 4. Rotate secrets regularly in production
# 5. Use secrets management (AWS Secrets Manager, HashiCorp Vault, etc.) in production
# 6. Restrict database user permissions (create app-specific DB user)
# 7. Enable TLS/SSL for all external connections in production
# 8. Use strong passwords (minimum 16 characters, mixed case, numbers, symbols)

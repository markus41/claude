{
  "$schema": "../../core/schemas/plugin.schema.json",
  "name": "api-integration-helper",
  "displayName": "API Integration Helper",
  "callsign": "Connector",
  "faction": "Forerunner",
  "version": "1.0.0",
  "description": "Connector - Production-ready API integration specialist. Orchestrates 10 agents to generate typed clients, auth flows, error handling, rate limiting, and mock servers from OpenAPI/GraphQL specs. Delivers enterprise-grade API integrations, not basic fetch wrappers.",
  "author": {
    "name": "Brookside BI",
    "email": "plugins@brooksidebi.com"
  },
  "license": "MIT",
  "repository": "https://github.com/Lobbi-Docs/claude",
  "categories": ["api", "code-generation", "integration", "testing"],
  "keywords": [
    "api", "openapi", "swagger", "graphql", "rest", "client-generation",
    "typescript", "authentication", "oauth", "api-key", "jwt",
    "rate-limiting", "retry-logic", "error-handling", "mock-server",
    "api-testing", "request-validation", "response-validation",
    "stripe", "api-integration", "sdk-generation", "typed-client"
  ],

  "provides": {
    "commands": 10,
    "agents": 10,
    "skills": 6,
    "hooks": 3
  },

  "integrationCapabilities": {
    "description": "End-to-end API integration pipeline with 6 core capabilities",
    "capabilities": {
      "schema-parsing": {
        "name": "Schema Parser & Analyzer",
        "version": "1.0.0",
        "description": "Parses OpenAPI 2.0/3.0/3.1, GraphQL schemas, and auto-detects API patterns",
        "supportedFormats": ["openapi-2.0", "openapi-3.0", "openapi-3.1", "graphql", "asyncapi"],
        "features": ["auto-detection", "version-migration", "schema-validation", "endpoint-discovery"]
      },
      "client-generation": {
        "name": "Typed Client Generator",
        "version": "1.0.0",
        "description": "Generates production-ready TypeScript clients with full type safety",
        "languages": ["typescript", "javascript", "python", "go"],
        "features": [
          "full-type-inference",
          "request-builders",
          "response-parsers",
          "zod-validation",
          "branded-types",
          "discriminated-unions"
        ]
      },
      "authentication": {
        "name": "Auth Flow Builder",
        "version": "1.0.0",
        "description": "Implements OAuth 2.0, API keys, JWT, and custom auth flows",
        "authTypes": ["oauth2", "api-key", "jwt", "basic", "bearer", "custom"],
        "flows": ["authorization-code", "client-credentials", "pkce", "refresh-token"],
        "features": ["token-refresh", "credential-storage", "multi-tenant"]
      },
      "error-handling": {
        "name": "Error Handler Builder",
        "version": "1.0.0",
        "description": "Creates robust error handling with retries, circuit breakers, and logging",
        "patterns": ["exponential-backoff", "circuit-breaker", "bulkhead", "timeout"],
        "features": [
          "typed-errors",
          "error-recovery",
          "retry-strategies",
          "fallback-values",
          "error-reporting"
        ]
      },
      "rate-limiting": {
        "name": "Rate Limiter & Retry Logic",
        "version": "1.0.0",
        "description": "Implements rate limiting, queue management, and intelligent retries",
        "strategies": ["token-bucket", "leaky-bucket", "fixed-window", "sliding-window"],
        "features": [
          "concurrent-request-limiting",
          "request-queuing",
          "priority-queues",
          "adaptive-throttling",
          "quota-tracking"
        ]
      },
      "mock-testing": {
        "name": "Mock Server & Testing Suite",
        "version": "1.0.0",
        "description": "Generates mock servers, integration tests, and E2E test suites",
        "mockTypes": ["msw", "json-server", "prism", "wiremock"],
        "testFrameworks": ["vitest", "jest", "playwright", "supertest"],
        "features": [
          "schema-based-mocking",
          "realistic-data-generation",
          "request-validation",
          "scenario-testing",
          "contract-testing"
        ]
      }
    }
  },

  "orchestration": {
    "enabled": true,
    "mandatory": true,
    "protocol": {
      "version": "2.0.0",
      "minSubAgents": 3,
      "maxSubAgents": 10,
      "defaultSubAgents": 6
    },
    "integrationFlow": {
      "phases": [
        {
          "id": "discovery",
          "name": "API Discovery & Analysis",
          "agents": ["schema-parser", "api-explorer"],
          "parallel": false,
          "required": true,
          "outputs": ["parsed-schema", "endpoint-inventory", "auth-requirements"]
        },
        {
          "id": "planning",
          "name": "Integration Planning",
          "agents": ["type-generator", "auth-builder"],
          "parallel": true,
          "required": true,
          "outputs": ["type-definitions", "auth-strategy", "integration-plan"]
        },
        {
          "id": "generation",
          "name": "Client Code Generation",
          "agents": ["client-generator", "error-handler", "rate-limiter"],
          "parallel": true,
          "required": true,
          "outputs": ["client-code", "error-handlers", "rate-limiting-logic"]
        },
        {
          "id": "testing",
          "name": "Testing & Validation",
          "agents": ["mock-server-builder", "validation-builder", "test-generator"],
          "parallel": true,
          "required": true,
          "outputs": ["mock-server", "validators", "test-suite"]
        },
        {
          "id": "documentation",
          "name": "Documentation Generation",
          "agents": ["doc-generator"],
          "parallel": false,
          "required": true,
          "outputs": ["usage-docs", "api-reference", "examples"]
        }
      ],
      "qualityChecks": {
        "typesSafety": "All generated code must pass TypeScript strict mode",
        "testCoverage": "Minimum 80% coverage for generated clients",
        "validation": "All requests/responses validated against schema",
        "errorHandling": "All API errors mapped to typed exceptions"
      }
    }
  },

  "commands": {
    "integrate-api": "commands/integrate-api.md",
    "generate-client": "commands/generate-client.md",
    "parse-openapi": "commands/parse-openapi.md",
    "parse-graphql": "commands/parse-graphql.md",
    "create-auth-flow": "commands/create-auth-flow.md",
    "generate-mock-server": "commands/generate-mock-server.md",
    "add-rate-limiting": "commands/add-rate-limiting.md",
    "generate-tests": "commands/generate-tests.md",
    "validate-schema": "commands/validate-schema.md",
    "api-explorer": "commands/api-explorer.md"
  },

  "agents": {
    "schema-parser-agent": {
      "path": "agents/schema-parser-agent.md",
      "model": "sonnet",
      "description": "Parses OpenAPI, Swagger, and GraphQL schemas with auto-detection and validation",
      "triggers": ["openapi", "swagger", "graphql schema", "parse api", "api spec"]
    },
    "type-generator-agent": {
      "path": "agents/type-generator-agent.md",
      "model": "sonnet",
      "description": "Generates TypeScript types, Zod schemas, and branded types from API schemas",
      "triggers": ["generate types", "typescript types", "zod schema", "type definitions"]
    },
    "client-generator-agent": {
      "path": "agents/client-generator-agent.md",
      "model": "sonnet",
      "description": "Generates production-ready API clients with methods, builders, and type safety",
      "triggers": ["generate client", "api client", "sdk", "client code"]
    },
    "auth-builder-agent": {
      "path": "agents/auth-builder-agent.md",
      "model": "sonnet",
      "description": "Implements OAuth 2.0, API keys, JWT, and custom authentication flows",
      "triggers": ["oauth", "authentication", "api key", "jwt", "auth flow"]
    },
    "error-handler-agent": {
      "path": "agents/error-handler-agent.md",
      "model": "sonnet",
      "description": "Creates typed error classes, retry logic, and circuit breaker patterns",
      "triggers": ["error handling", "retry", "circuit breaker", "error recovery"]
    },
    "rate-limiter-agent": {
      "path": "agents/rate-limiter-agent.md",
      "model": "sonnet",
      "description": "Implements rate limiting, request queuing, and adaptive throttling",
      "triggers": ["rate limit", "throttle", "request queue", "quota"]
    },
    "mock-server-agent": {
      "path": "agents/mock-server-agent.md",
      "model": "sonnet",
      "description": "Generates MSW/Prism mock servers with realistic data and request validation",
      "triggers": ["mock server", "msw", "prism", "api mocking"]
    },
    "validation-builder-agent": {
      "path": "agents/validation-builder-agent.md",
      "model": "haiku",
      "description": "Creates Zod validators for request/response validation and runtime type checking",
      "triggers": ["validation", "zod", "validate request", "validate response"]
    },
    "test-generator-agent": {
      "path": "agents/test-generator-agent.md",
      "model": "sonnet",
      "description": "Generates integration tests, E2E tests, and contract tests for API clients",
      "triggers": ["generate tests", "api tests", "integration tests", "e2e tests"]
    },
    "api-explorer-agent": {
      "path": "agents/api-explorer-agent.md",
      "model": "haiku",
      "description": "Interactive API exploration, endpoint discovery, and request/response analysis",
      "triggers": ["explore api", "test endpoint", "api playground", "try request"]
    }
  },

  "skills": {
    "openapi-parsing": {
      "path": "skills/openapi-parsing.md",
      "description": "Parse and analyze OpenAPI 2.0/3.0/3.1 specifications with full validation",
      "triggers": ["openapi", "swagger", "api spec", "parse openapi"]
    },
    "graphql-parsing": {
      "path": "skills/graphql-parsing.md",
      "description": "Parse GraphQL schemas and generate typed clients with codegen integration",
      "triggers": ["graphql", "graphql schema", "parse graphql", "graphql codegen"]
    },
    "typescript-generation": {
      "path": "skills/typescript-generation.md",
      "description": "Generate production-ready TypeScript with strict types and Zod validation",
      "triggers": ["typescript", "generate typescript", "type generation", "zod"]
    },
    "authentication-flows": {
      "path": "skills/authentication-flows.md",
      "description": "Implement OAuth 2.0, PKCE, JWT, and custom authentication patterns",
      "triggers": ["oauth", "authentication", "auth flow", "pkce", "jwt"]
    },
    "resilience-patterns": {
      "path": "skills/resilience-patterns.md",
      "description": "Implement retry logic, circuit breakers, timeouts, and fallback strategies",
      "triggers": ["retry", "circuit breaker", "resilience", "error recovery"]
    },
    "api-mocking": {
      "path": "skills/api-mocking.md",
      "description": "Create MSW/Prism mock servers with schema-based realistic data generation",
      "triggers": ["mock", "msw", "prism", "api mocking", "mock server"]
    }
  },

  "hooks": {
    "preGeneration": {
      "script": "hooks/pre-generation-validation.sh",
      "description": "Validates API schema before client generation"
    },
    "postGeneration": {
      "script": "hooks/post-generation-quality.sh",
      "description": "Runs TypeScript compilation and tests on generated code"
    },
    "preIntegration": {
      "script": "hooks/pre-integration-check.sh",
      "description": "Checks API availability and validates credentials before integration"
    }
  },

  "permissions": {
    "filesystem": [
      { "path": "**/*.{ts,js,json,yaml,yml,graphql,gql}", "access": "readwrite" },
      { "path": "**/openapi.{json,yaml,yml}", "access": "read" },
      { "path": "**/schema.graphql", "access": "read" },
      { "path": "**/generated/**", "access": "readwrite" },
      { "path": "**/__mocks__/**", "access": "readwrite" },
      { "path": "**/__tests__/**", "access": "readwrite" }
    ],
    "tools": ["Bash", "Read", "Write", "Edit", "Grep", "Glob", "Task", "WebFetch"],
    "mcpServers": ["context7", "github"]
  },

  "configuration": {
    "schema": {
      "type": "object",
      "properties": {
        "defaultLanguage": {
          "type": "string",
          "enum": ["typescript", "javascript", "python", "go"],
          "default": "typescript",
          "description": "Default language for client generation"
        },
        "typeGeneration": {
          "type": "object",
          "properties": {
            "strictMode": { "type": "boolean", "default": true },
            "useZod": { "type": "boolean", "default": true },
            "useBrandedTypes": { "type": "boolean", "default": true }
          }
        },
        "authentication": {
          "type": "object",
          "properties": {
            "defaultAuthType": {
              "type": "string",
              "enum": ["oauth2", "api-key", "jwt", "bearer", "basic"],
              "default": "bearer"
            },
            "enableTokenRefresh": { "type": "boolean", "default": true },
            "secureStorage": { "type": "boolean", "default": true }
          }
        },
        "errorHandling": {
          "type": "object",
          "properties": {
            "maxRetries": { "type": "number", "default": 3, "minimum": 0, "maximum": 10 },
            "retryDelay": { "type": "number", "default": 1000, "minimum": 0 },
            "useCircuitBreaker": { "type": "boolean", "default": true },
            "circuitBreakerThreshold": { "type": "number", "default": 5, "minimum": 1 }
          }
        },
        "rateLimiting": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean", "default": true },
            "strategy": {
              "type": "string",
              "enum": ["token-bucket", "leaky-bucket", "fixed-window", "sliding-window"],
              "default": "token-bucket"
            },
            "maxConcurrent": { "type": "number", "default": 10, "minimum": 1 }
          }
        },
        "mockServer": {
          "type": "object",
          "properties": {
            "framework": {
              "type": "string",
              "enum": ["msw", "prism", "json-server", "wiremock"],
              "default": "msw"
            },
            "generateRealisticData": { "type": "boolean", "default": true },
            "validateRequests": { "type": "boolean", "default": true }
          }
        },
        "testing": {
          "type": "object",
          "properties": {
            "framework": {
              "type": "string",
              "enum": ["vitest", "jest", "playwright"],
              "default": "vitest"
            },
            "generateIntegrationTests": { "type": "boolean", "default": true },
            "generateE2ETests": { "type": "boolean", "default": true },
            "coverageThreshold": { "type": "number", "default": 80, "minimum": 0, "maximum": 100 }
          }
        }
      }
    }
  },

  "activation": {
    "auto": true,
    "priority": 850,
    "conditions": {
      "filePatterns": [
        "**/openapi.{json,yaml,yml}",
        "**/swagger.{json,yaml,yml}",
        "**/schema.graphql",
        "**/*.graphql",
        "**/api-spec.{json,yaml,yml}"
      ],
      "keywords": [
        "api", "openapi", "swagger", "graphql", "rest", "client",
        "authentication", "oauth", "rate limit", "mock server"
      ]
    }
  }
}

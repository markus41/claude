{
  "$schema": "../../core/schemas/plugin.schema.json",
  "name": "multi-model-orchestration",
  "displayName": "Multi-Model Orchestration",
  "callsign": "Conductor",
  "faction": "Forerunner",
  "version": "1.0.0",
  "description": "Conductor - The Orchestrator of Intelligences. Revolutionary multi-LLM orchestration that dynamically routes tasks to the optimal AI model (Claude, GPT, Gemini, Llama, Mistral) based on task characteristics, cost, latency, and capability matching. Implements model ensembles, consensus voting, and specialized model routing for maximum effectiveness.",
  "author": {
    "name": "The Lobbi",
    "email": "developers@thelobbi.io"
  },
  "license": "MIT",
  "repository": "https://github.com/Lobbi-Docs/claude",
  "keywords": [
    "multi-model", "llm-routing", "model-selection", "ensemble",
    "claude", "gpt", "gemini", "llama", "mistral", "ollama",
    "cost-optimization", "latency-optimization", "capability-matching",
    "consensus", "voting", "model-cascade", "fallback", "load-balancing"
  ],

  "supportedModels": {
    "anthropic": {
      "provider": "Anthropic",
      "models": [
        {
          "id": "claude-opus-4-5",
          "tier": "flagship",
          "strengths": ["reasoning", "code", "analysis", "creative"],
          "thinkingSupport": true,
          "maxThinkingBudget": 128000,
          "costPer1kTokens": { "input": 0.015, "output": 0.075 }
        },
        {
          "id": "claude-sonnet-4",
          "tier": "balanced",
          "strengths": ["code", "analysis", "general", "speed"],
          "thinkingSupport": true,
          "maxThinkingBudget": 64000,
          "costPer1kTokens": { "input": 0.003, "output": 0.015 }
        },
        {
          "id": "claude-haiku-3-5",
          "tier": "fast",
          "strengths": ["speed", "simple-tasks", "classification"],
          "thinkingSupport": false,
          "costPer1kTokens": { "input": 0.00025, "output": 0.00125 }
        }
      ]
    },
    "openai": {
      "provider": "OpenAI",
      "models": [
        {
          "id": "gpt-4o",
          "tier": "flagship",
          "strengths": ["vision", "general", "code"],
          "costPer1kTokens": { "input": 0.005, "output": 0.015 }
        },
        {
          "id": "o1-preview",
          "tier": "reasoning",
          "strengths": ["math", "logic", "reasoning"],
          "reasoningModel": true,
          "costPer1kTokens": { "input": 0.015, "output": 0.060 }
        },
        {
          "id": "gpt-4o-mini",
          "tier": "fast",
          "strengths": ["speed", "simple-tasks"],
          "costPer1kTokens": { "input": 0.00015, "output": 0.0006 }
        }
      ]
    },
    "google": {
      "provider": "Google",
      "models": [
        {
          "id": "gemini-2.0-flash",
          "tier": "fast",
          "strengths": ["speed", "multimodal", "long-context"],
          "contextWindow": 1000000,
          "costPer1kTokens": { "input": 0.0001, "output": 0.0004 }
        },
        {
          "id": "gemini-1.5-pro",
          "tier": "balanced",
          "strengths": ["multimodal", "long-context", "general"],
          "contextWindow": 2000000,
          "costPer1kTokens": { "input": 0.00125, "output": 0.005 }
        }
      ]
    },
    "local": {
      "provider": "Ollama/Local",
      "models": [
        {
          "id": "llama3.2",
          "tier": "local",
          "strengths": ["privacy", "offline", "code"],
          "costPer1kTokens": { "input": 0, "output": 0 }
        },
        {
          "id": "codellama",
          "tier": "local",
          "strengths": ["code", "offline"],
          "costPer1kTokens": { "input": 0, "output": 0 }
        },
        {
          "id": "mistral",
          "tier": "local",
          "strengths": ["general", "speed", "offline"],
          "costPer1kTokens": { "input": 0, "output": 0 }
        }
      ]
    }
  },

  "routingStrategies": {
    "task-optimized": {
      "name": "Task-Optimized Routing",
      "description": "Routes to model best suited for task type",
      "factors": ["task-type", "complexity", "domain"],
      "taskMappings": {
        "complex-reasoning": "claude-opus-4-5",
        "code-generation": "claude-sonnet-4",
        "code-review": "claude-sonnet-4",
        "documentation": "gpt-4o-mini",
        "classification": "claude-haiku-3-5",
        "long-context": "gemini-1.5-pro",
        "math-heavy": "o1-preview",
        "sensitive-data": "llama3.2"
      }
    },
    "cost-optimized": {
      "name": "Cost-Optimized Routing",
      "description": "Minimizes cost while meeting quality threshold",
      "tryOrder": ["haiku", "gpt-4o-mini", "gemini-flash", "sonnet", "opus"],
      "qualityThreshold": 0.8,
      "fallbackOnLowQuality": true
    },
    "latency-optimized": {
      "name": "Latency-Optimized Routing",
      "description": "Prioritizes fastest response time",
      "tryOrder": ["haiku", "gpt-4o-mini", "gemini-flash"],
      "maxLatencyMs": 2000
    },
    "quality-maximized": {
      "name": "Quality-Maximized Routing",
      "description": "Uses most capable model regardless of cost",
      "preferOrder": ["opus", "o1-preview", "gpt-4o", "sonnet"],
      "useCaseSpecific": true
    },
    "ensemble": {
      "name": "Ensemble Mode",
      "description": "Runs multiple models and combines results",
      "modes": {
        "consensus": "Majority voting on output",
        "best-of-n": "Select highest quality response",
        "merge": "Intelligently merge multiple responses",
        "debate": "Models critique each other's outputs"
      },
      "minModels": 2,
      "maxModels": 5
    },
    "cascade": {
      "name": "Cascade Routing",
      "description": "Tries cheap models first, escalates if needed",
      "stages": [
        { "model": "haiku", "confidence": 0.9 },
        { "model": "sonnet", "confidence": 0.8 },
        { "model": "opus", "confidence": 0.0 }
      ]
    },
    "privacy-first": {
      "name": "Privacy-First Routing",
      "description": "Uses local models for sensitive data",
      "sensitiveDataPatterns": ["api-key", "password", "secret", "pii"],
      "localModels": ["llama3.2", "mistral", "codellama"],
      "fallbackAllowed": false
    },
    "hybrid": {
      "name": "Hybrid Routing",
      "description": "Splits task across multiple models",
      "splitStrategies": [
        "analysis-on-opus-implementation-on-sonnet",
        "planning-on-opus-execution-on-haiku",
        "review-on-multiple-merge-results"
      ]
    }
  },

  "commands": {
    "model:route": "commands/route.md",
    "model:select": "commands/select.md",
    "model:ensemble": "commands/ensemble.md",
    "model:cascade": "commands/cascade.md",
    "model:compare": "commands/compare.md",
    "model:benchmark": "commands/benchmark.md",
    "model:cost": "commands/cost.md",
    "model:latency": "commands/latency.md",
    "model:quality": "commands/quality.md",
    "model:configure": "commands/configure.md",
    "model:profiles": "commands/profiles.md",
    "model:stats": "commands/stats.md",
    "model:fallback": "commands/fallback.md",
    "model:status": "commands/status.md"
  },

  "agents": {
    "routing-orchestrator-agent": {
      "path": "agents/routing-orchestrator-agent.md",
      "model": "haiku",
      "description": "Master router that selects optimal model for each task",
      "triggers": ["route to model", "which model", "best model for"]
    },
    "task-classifier-agent": {
      "path": "agents/task-classifier-agent.md",
      "model": "haiku",
      "description": "Classifies tasks to determine optimal routing",
      "triggers": ["classify task", "task type"]
    },
    "cost-optimizer-agent": {
      "path": "agents/cost-optimizer-agent.md",
      "model": "haiku",
      "description": "Optimizes model selection for cost",
      "triggers": ["minimize cost", "cheap model", "budget"]
    },
    "quality-assessor-agent": {
      "path": "agents/quality-assessor-agent.md",
      "model": "sonnet",
      "description": "Assesses output quality to validate routing",
      "triggers": ["assess quality", "validate output", "quality check"]
    },
    "ensemble-coordinator-agent": {
      "path": "agents/ensemble-coordinator-agent.md",
      "model": "sonnet",
      "description": "Coordinates ensemble runs and merges results",
      "triggers": ["ensemble", "multiple models", "consensus"]
    },
    "cascade-manager-agent": {
      "path": "agents/cascade-manager-agent.md",
      "model": "haiku",
      "description": "Manages cascade routing with escalation",
      "triggers": ["cascade", "escalate", "try cheaper first"]
    },
    "benchmark-agent": {
      "path": "agents/benchmark-agent.md",
      "model": "haiku",
      "description": "Benchmarks models for routing decisions",
      "triggers": ["benchmark", "compare models", "model performance"]
    },
    "fallback-handler-agent": {
      "path": "agents/fallback-handler-agent.md",
      "model": "haiku",
      "description": "Handles model failures with graceful fallback",
      "triggers": ["fallback", "model failed", "retry"]
    },
    "privacy-router-agent": {
      "path": "agents/privacy-router-agent.md",
      "model": "haiku",
      "description": "Routes sensitive data to local models",
      "triggers": ["sensitive", "privacy", "local model"]
    },
    "hybrid-splitter-agent": {
      "path": "agents/hybrid-splitter-agent.md",
      "model": "sonnet",
      "description": "Splits tasks across multiple models",
      "triggers": ["split task", "hybrid", "multi-model task"]
    }
  },

  "skills": {
    "model-routing": {
      "path": "skills/model-routing.md",
      "description": "Intelligent LLM routing strategies",
      "triggers": ["route", "model selection", "which model"]
    },
    "ensemble-methods": {
      "path": "skills/ensemble-methods.md",
      "description": "Multi-model ensemble techniques",
      "triggers": ["ensemble", "voting", "consensus", "merge"]
    },
    "cost-optimization": {
      "path": "skills/cost-optimization.md",
      "description": "LLM cost optimization strategies",
      "triggers": ["cost", "budget", "optimize spend"]
    },
    "quality-assessment": {
      "path": "skills/quality-assessment.md",
      "description": "Output quality assessment and validation",
      "triggers": ["quality", "assess", "validate"]
    },
    "model-profiles": {
      "path": "skills/model-profiles.md",
      "description": "Model capability and performance profiles",
      "triggers": ["model capabilities", "model profile", "model strengths"]
    },
    "fallback-strategies": {
      "path": "skills/fallback-strategies.md",
      "description": "Graceful degradation and fallback",
      "triggers": ["fallback", "retry", "failover"]
    }
  },

  "hooks": {
    "preTaskExecution": {
      "script": "hooks/scripts/route-task.sh",
      "description": "Routes task to optimal model before execution"
    },
    "postTaskExecution": {
      "script": "hooks/scripts/log-routing.sh",
      "description": "Logs routing decision and outcome for learning"
    },
    "onModelFailure": {
      "script": "hooks/scripts/handle-failure.sh",
      "description": "Handles model failures with fallback"
    },
    "onBudgetWarning": {
      "script": "hooks/scripts/budget-alert.sh",
      "description": "Alerts when API budget threshold reached"
    }
  },

  "modelProfiles": {
    "path": "model-profiles/",
    "profiles": [
      "claude-opus.json",
      "claude-sonnet.json",
      "claude-haiku.json",
      "gpt-4o.json",
      "o1-preview.json",
      "gemini-flash.json",
      "llama3.json"
    ]
  },

  "permissions": {
    "filesystem": [
      { "path": ".claude/multi-model/**", "access": "readwrite" }
    ],
    "tools": ["Bash", "Read", "Write", "Task"],
    "mcpServers": []
  },

  "configuration": {
    "schema": {
      "type": "object",
      "properties": {
        "defaultStrategy": {
          "type": "string",
          "enum": ["task-optimized", "cost-optimized", "latency-optimized", "quality-maximized"],
          "default": "task-optimized"
        },
        "enabledProviders": {
          "type": "array",
          "items": { "type": "string" },
          "default": ["anthropic", "openai", "google", "local"]
        },
        "costBudgetDaily": {
          "type": "number",
          "default": 50,
          "description": "Daily API cost budget in USD"
        },
        "qualityThreshold": {
          "type": "number",
          "default": 0.8,
          "minimum": 0.5,
          "maximum": 1.0
        },
        "enableEnsemble": {
          "type": "boolean",
          "default": false
        },
        "preferLocalForSensitive": {
          "type": "boolean",
          "default": true
        }
      }
    }
  },

  "activation": {
    "auto": true,
    "priority": 990,
    "conditions": {
      "keywords": ["model", "llm", "route", "ensemble", "cost", "which model"]
    }
  }
}

{
  "$schema": "../../core/schemas/plugin.schema.json",
  "name": "debug-detective",
  "displayName": "Debug Detective",
  "callsign": "Sherlock",
  "faction": "Investigator",
  "version": "1.0.0",
  "description": "Sherlock - Master investigator of code mysteries. Systematically debugs issues through hypothesis formation, evidence gathering, stack trace analysis, data flow tracing, git bisect automation, and state comparison. Finds root causes faster through scientific debugging methodology.",
  "author": {
    "name": "The Lobbi",
    "email": "developers@thelobbi.io"
  },
  "license": "MIT",
  "repository": "https://github.com/Lobbi-Docs/claude",
  "categories": ["debugging", "analysis", "troubleshooting", "root-cause"],
  "keywords": [
    "debug", "debugging", "bug", "error", "crash", "null", "undefined",
    "stack-trace", "exception", "breakpoint", "console.log", "debugger",
    "hypothesis", "root-cause", "investigation", "detective",
    "git-bisect", "regression", "when-did-this-break", "data-flow",
    "state-comparison", "memory-leak", "race-condition", "deadlock",
    "performance-bottleneck", "slow", "hanging", "timeout",
    "why-is-this", "unexpected-behavior", "reproduce", "minimal-repro",
    "heisenbug", "edge-case", "corner-case", "boundary-condition"
  ],

  "provides": {
    "commands": 12,
    "agents": 11,
    "skills": 6,
    "hooks": 4
  },

  "integrations": {
    "jira-orchestrator": {
      "description": "Links debugging sessions to bug tickets, updates with findings",
      "commands": ["debug:jira-link", "debug:update-ticket"],
      "bidirectional": true
    },
    "git-workflow-orchestrator": {
      "description": "Automates git bisect for regression hunting",
      "commands": ["debug:bisect-auto"],
      "blocking": false
    },
    "testing-orchestrator": {
      "description": "Generates reproduction tests from debugging sessions",
      "commands": ["debug:generate-test"],
      "blocking": false
    },
    "code-knowledge-graph": {
      "description": "Traces data flow through call graphs",
      "commands": ["debug:trace-flow"],
      "blocking": false
    }
  },

  "debuggingStrategies": {
    "hypothesis-driven": {
      "name": "Hypothesis-Driven Investigation",
      "description": "Form hypotheses, design experiments, gather evidence",
      "agents": ["hypothesis-agent", "evidence-collector-agent"],
      "workflow": "workflows/hypothesis-investigation.md"
    },
    "stack-trace-analysis": {
      "name": "Stack Trace Deep Dive",
      "description": "Analyze stack traces to identify exact failure points",
      "agents": ["stack-trace-agent", "error-pattern-agent"],
      "workflow": "workflows/stack-trace-analysis.md"
    },
    "data-flow-tracing": {
      "name": "Data Flow Tracing",
      "description": "Trace values through execution to find where they become invalid",
      "agents": ["data-flow-agent", "state-inspector-agent"],
      "workflow": "workflows/data-flow-trace.md"
    },
    "binary-search-history": {
      "name": "Git Bisect Automation",
      "description": "Binary search through git history to find breaking commit",
      "agents": ["bisect-agent", "regression-hunter-agent"],
      "workflow": "workflows/bisect-automation.md"
    },
    "state-comparison": {
      "name": "Working vs Broken State Comparison",
      "description": "Compare working and broken states to identify differences",
      "agents": ["state-comparator-agent", "diff-analyzer-agent"],
      "workflow": "workflows/state-comparison.md"
    },
    "performance-profiling": {
      "name": "Performance Bottleneck Detection",
      "description": "Profile execution to find slow operations",
      "agents": ["profiler-agent", "bottleneck-detector-agent"],
      "workflow": "workflows/performance-profiling.md"
    },
    "memory-analysis": {
      "name": "Memory Leak Detection",
      "description": "Track memory allocation and identify leaks",
      "agents": ["memory-tracker-agent", "leak-detector-agent"],
      "workflow": "workflows/memory-analysis.md"
    },
    "concurrency-debugging": {
      "name": "Race Condition & Deadlock Detection",
      "description": "Identify timing-dependent bugs and synchronization issues",
      "agents": ["race-detector-agent", "timing-analyzer-agent"],
      "workflow": "workflows/concurrency-debug.md"
    }
  },

  "commands": {
    "debug:investigate": "commands/investigate.md",
    "debug:hypothesis": "commands/hypothesis.md",
    "debug:trace-data": "commands/trace-data.md",
    "debug:bisect": "commands/bisect.md",
    "debug:compare-states": "commands/compare-states.md",
    "debug:add-logging": "commands/add-logging.md",
    "debug:suggest-breakpoints": "commands/suggest-breakpoints.md",
    "debug:analyze-stack": "commands/analyze-stack.md",
    "debug:profile": "commands/profile.md",
    "debug:memory-leak": "commands/memory-leak.md",
    "debug:race-condition": "commands/race-condition.md",
    "debug:session-report": "commands/session-report.md"
  },

  "agents": {
    "hypothesis-agent": {
      "path": "agents/hypothesis-agent.md",
      "model": "opus",
      "description": "Forms hypotheses about bug causes based on symptoms and codebase analysis",
      "triggers": ["why is this", "what could cause", "hypothesis", "possible causes"]
    },
    "evidence-collector-agent": {
      "path": "agents/evidence-collector-agent.md",
      "model": "sonnet",
      "description": "Designs experiments and collects evidence to test hypotheses",
      "triggers": ["test hypothesis", "gather evidence", "verify", "prove"]
    },
    "stack-trace-agent": {
      "path": "agents/stack-trace-agent.md",
      "model": "sonnet",
      "description": "Analyzes stack traces, identifies root cause frames, suggests fixes",
      "triggers": ["stack trace", "exception", "error at line", "traceback"]
    },
    "data-flow-agent": {
      "path": "agents/data-flow-agent.md",
      "model": "sonnet",
      "description": "Traces values through execution to find where they become invalid",
      "triggers": ["null pointer", "undefined", "invalid value", "trace data", "where does this come from"]
    },
    "state-inspector-agent": {
      "path": "agents/state-inspector-agent.md",
      "model": "haiku",
      "description": "Suggests strategic console.log and breakpoint placements",
      "triggers": ["add logging", "where to log", "breakpoint", "inspect state"]
    },
    "bisect-agent": {
      "path": "agents/bisect-agent.md",
      "model": "sonnet",
      "description": "Automates git bisect to find when a bug was introduced",
      "triggers": ["when did this break", "git bisect", "find regression", "when did this start"]
    },
    "state-comparator-agent": {
      "path": "agents/state-comparator-agent.md",
      "model": "sonnet",
      "description": "Compares working vs broken states to identify critical differences",
      "triggers": ["compare states", "working vs broken", "what changed", "diff states"]
    },
    "error-pattern-agent": {
      "path": "agents/error-pattern-agent.md",
      "model": "sonnet",
      "description": "Recognizes common error patterns and suggests known fixes",
      "triggers": ["common error", "known issue", "error pattern", "typical cause"]
    },
    "race-detector-agent": {
      "path": "agents/race-detector-agent.md",
      "model": "opus",
      "description": "Identifies race conditions, deadlocks, and timing issues",
      "triggers": ["race condition", "deadlock", "timing issue", "intermittent", "sometimes works"]
    },
    "memory-tracker-agent": {
      "path": "agents/memory-tracker-agent.md",
      "model": "sonnet",
      "description": "Tracks memory usage and identifies memory leaks",
      "triggers": ["memory leak", "growing memory", "heap snapshot", "memory usage"]
    },
    "bottleneck-detector-agent": {
      "path": "agents/bottleneck-detector-agent.md",
      "model": "sonnet",
      "description": "Identifies performance bottlenecks through profiling",
      "triggers": ["slow", "performance", "bottleneck", "why is this slow", "profiling"]
    }
  },

  "skills": {
    "hypothesis-testing": {
      "path": "skills/hypothesis-testing.md",
      "description": "Scientific method for debugging: hypothesis, experiment, evidence",
      "triggers": ["scientific debugging", "hypothesis", "experiment"]
    },
    "strategic-logging": {
      "path": "skills/strategic-logging.md",
      "description": "Where and how to add console.log for maximum debugging value",
      "triggers": ["console.log", "logging", "debug print", "trace"]
    },
    "git-bisect": {
      "path": "skills/git-bisect.md",
      "description": "Automated binary search through git history",
      "triggers": ["git bisect", "binary search", "when did this break"]
    },
    "state-inspection": {
      "path": "skills/state-inspection.md",
      "description": "Debugger usage, breakpoints, watches, call stack navigation",
      "triggers": ["debugger", "breakpoint", "watch", "step through"]
    },
    "data-flow-analysis": {
      "path": "skills/data-flow-analysis.md",
      "description": "Trace data transformations through call chains",
      "triggers": ["data flow", "trace value", "follow data", "value origin"]
    },
    "error-interpretation": {
      "path": "skills/error-interpretation.md",
      "description": "Interpreting error messages, stack traces, and logs",
      "triggers": ["error message", "stack trace", "interpret error", "what does this mean"]
    }
  },

  "hooks": {
    "onError": {
      "script": "hooks/scripts/auto-analyze-error.sh",
      "description": "Automatically analyzes errors and suggests debugging strategies"
    },
    "onTestFailure": {
      "script": "hooks/scripts/debug-test-failure.sh",
      "description": "Starts debugging session for failing tests"
    },
    "postBugReport": {
      "script": "hooks/scripts/create-debug-session.sh",
      "description": "Creates debugging session from bug reports"
    },
    "onNullPointer": {
      "script": "hooks/scripts/trace-null-origin.sh",
      "description": "Automatically traces null/undefined value origins"
    }
  },

  "permissions": {
    "filesystem": [
      { "path": "**/*", "access": "read" },
      { "path": "**/*.log", "access": "read" },
      { "path": ".debug-sessions/**", "access": "readwrite" },
      { "path": "debug-reports/**", "access": "readwrite" }
    ],
    "tools": ["Bash", "Read", "Write", "Edit", "Grep", "Glob", "Task"],
    "mcpServers": ["github", "obsidian"]
  },

  "configuration": {
    "schema": {
      "type": "object",
      "properties": {
        "autoStartSession": {
          "type": "boolean",
          "description": "Automatically start debugging session on error",
          "default": true
        },
        "maxHypotheses": {
          "type": "number",
          "description": "Maximum hypotheses to explore in parallel",
          "default": 5,
          "minimum": 1,
          "maximum": 10
        },
        "bisectTestCommand": {
          "type": "string",
          "description": "Command to test each commit during git bisect",
          "default": "npm test"
        },
        "loggingFramework": {
          "type": "string",
          "enum": ["console", "winston", "pino", "bunyan", "log4js"],
          "default": "console"
        },
        "preferredDebugger": {
          "type": "string",
          "enum": ["chrome-devtools", "vscode", "webstorm", "node-inspect"],
          "default": "vscode"
        },
        "createReproductionTest": {
          "type": "boolean",
          "description": "Automatically generate test to reproduce the bug",
          "default": true
        },
        "trackDebugSessions": {
          "type": "boolean",
          "description": "Save debugging sessions for analysis and learning",
          "default": true
        }
      }
    }
  },

  "activation": {
    "auto": true,
    "priority": 900,
    "conditions": {
      "keywords": [
        "debug", "bug", "error", "crash", "null", "undefined", "exception",
        "why is this", "not working", "broken", "unexpected"
      ],
      "errorPatterns": [
        "TypeError", "ReferenceError", "SyntaxError", "RangeError",
        "NullPointerException", "SegmentationFault", "AssertionError"
      ]
    }
  }
}

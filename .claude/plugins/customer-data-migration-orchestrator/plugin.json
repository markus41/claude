{
  "$schema": "../../core/schemas/plugin.schema.json",
  "name": "customer-data-migration-orchestrator",
  "displayName": "Customer Data Migration Orchestrator",
  "callsign": "Terraformer",
  "faction": "Forerunner",
  "version": "2.0.0",
  "description": "Terraformer - Universal data migration platform with source adapters. Like Terraform for infrastructure, but for customer data. Connect ANY source (Salesforce, HubSpot, Stripe, legacy DBs, CSVs) and automatically transform to YOUR target schema.",
  "author": {
    "name": "Lobbi Engineering",
    "email": "plugins@thelobbi.io"
  },
  "license": "MIT",
  "repository": "https://github.com/Lobbi-Docs/claude",
  "architecture": {
    "pattern": "adapter-based",
    "description": "Like Terraformer/Terraform - source adapters (providers) extract data, universal IR transforms, target mapper outputs to YOUR schema",
    "flow": "Source Adapter → Universal IR → Transformation Engine → Target Schema → Your Database"
  },

  "sourceAdapters": {
    "description": "Pluggable adapters for different source systems (like Terraform providers)",
    "crm": {
      "salesforce": {
        "callsign": "Nimbus",
        "objects": ["Account", "Contact", "Lead", "Opportunity", "Case", "Task"],
        "auth": ["oauth2", "jwt-bearer"],
        "bulk_api": true
      },
      "hubspot": {
        "callsign": "Beacon",
        "objects": ["contacts", "companies", "deals", "tickets", "products"],
        "auth": ["oauth2", "api-key"],
        "bulk_api": true
      },
      "pipedrive": {
        "callsign": "Pipeline",
        "objects": ["persons", "organizations", "deals", "activities"],
        "auth": ["api-key", "oauth2"]
      },
      "zoho": {
        "callsign": "Zenith",
        "objects": ["Leads", "Contacts", "Accounts", "Deals", "Tasks"],
        "auth": ["oauth2"]
      }
    },
    "billing": {
      "stripe": {
        "callsign": "Vault",
        "objects": ["customers", "subscriptions", "invoices", "payments", "products"],
        "auth": ["api-key"],
        "expand_relations": true
      },
      "quickbooks": {
        "callsign": "Ledger",
        "objects": ["Customer", "Invoice", "Payment", "Item", "Account"],
        "auth": ["oauth2"]
      },
      "chargebee": {
        "callsign": "Mint",
        "objects": ["customers", "subscriptions", "invoices", "plans"],
        "auth": ["api-key"]
      }
    },
    "support": {
      "zendesk": {
        "callsign": "Remedy",
        "objects": ["users", "tickets", "organizations", "comments"],
        "auth": ["oauth2", "api-token"]
      },
      "intercom": {
        "callsign": "Relay",
        "objects": ["contacts", "conversations", "companies", "tags"],
        "auth": ["oauth2", "api-key"]
      },
      "freshdesk": {
        "callsign": "Harbor",
        "objects": ["contacts", "tickets", "companies", "agents"],
        "auth": ["api-key"]
      }
    },
    "databases": {
      "postgresql": {
        "callsign": "Elephant",
        "features": ["schemas", "views", "procedures", "triggers"],
        "ssl": true,
        "pooling": true
      },
      "mysql": {
        "callsign": "Dolphin",
        "features": ["schemas", "views", "procedures"],
        "ssl": true
      },
      "sqlserver": {
        "callsign": "Trident",
        "features": ["schemas", "views", "procedures", "triggers"],
        "ssl": true
      },
      "oracle": {
        "callsign": "Sphinx",
        "features": ["schemas", "views", "procedures", "packages"],
        "ssl": true
      },
      "mongodb": {
        "callsign": "Atlas",
        "features": ["collections", "aggregations", "change-streams"],
        "ssl": true
      }
    },
    "files": {
      "csv": {
        "callsign": "Tabula",
        "encodings": ["utf-8", "utf-16", "iso-8859-1", "windows-1252"],
        "delimiters": ["comma", "tab", "pipe", "semicolon", "auto"]
      },
      "excel": {
        "callsign": "Scroll",
        "formats": ["xlsx", "xls", "xlsm"],
        "features": ["multi-sheet", "named-ranges", "formulas-as-values"]
      },
      "json": {
        "callsign": "Codex",
        "formats": ["json", "jsonl", "ndjson"],
        "features": ["nested-objects", "arrays", "streaming"]
      },
      "xml": {
        "callsign": "Glyph",
        "features": ["xpath", "xsd-validation", "namespaces"]
      },
      "parquet": {
        "callsign": "Prism",
        "features": ["columnar", "compression", "schema-evolution"]
      }
    },
    "apis": {
      "rest": {
        "callsign": "Courier",
        "auth": ["oauth2", "api-key", "basic", "bearer", "custom-header"],
        "pagination": ["offset", "cursor", "link-header", "page-number"]
      },
      "graphql": {
        "callsign": "Graph",
        "features": ["introspection", "fragments", "subscriptions"]
      }
    }
  },

  "targetSchema": {
    "description": "YOUR target schema - all sources transform to this",
    "autoDetection": {
      "prisma": true,
      "typeorm": true,
      "drizzle": true,
      "raw-sql": true
    },
    "entities": "Loaded dynamically from your schema definition",
    "relationships": "Inferred from foreign keys and decorators"
  },

  "agents": {
    "connection-broker-agent": {
      "callsign": "Harbinger",
      "path": "agents/connection-broker-agent.md",
      "model": "sonnet",
      "description": "Establishes and manages connections to source systems. Tests connectivity, handles auth flows, validates permissions.",
      "triggers": ["connect to", "test connection", "authenticate", "setup source"]
    },
    "source-extractor-agent": {
      "callsign": "Excavator",
      "path": "agents/source-extractor-agent.md",
      "model": "sonnet",
      "description": "Extracts data from source systems using appropriate adapter. Handles pagination, rate limits, bulk APIs.",
      "triggers": ["extract from", "pull data", "fetch records", "export from"]
    },
    "schema-introspector-agent": {
      "callsign": "Oracle",
      "path": "agents/schema-introspector-agent.md",
      "model": "opus",
      "description": "Introspects source schema and YOUR target schema. Maps structures, detects relationships, identifies gaps.",
      "triggers": ["analyze schema", "introspect", "compare schemas", "detect structure"]
    },
    "field-alchemist-agent": {
      "callsign": "Alchemist",
      "path": "agents/field-alchemist-agent.md",
      "model": "opus",
      "description": "AI-powered field mapping with semantic matching. Transforms any source field to your target fields with confidence scoring.",
      "triggers": ["map fields", "match columns", "auto-map", "suggest mapping"]
    },
    "transformer-agent": {
      "callsign": "Morpheus",
      "path": "agents/transformer-agent.md",
      "model": "sonnet",
      "description": "Designs and applies data transformations. Type conversions, splits, merges, lookups, calculations.",
      "triggers": ["transform", "convert", "split field", "merge fields", "calculate"]
    },
    "normalizer-agent": {
      "callsign": "Refiner",
      "path": "agents/normalizer-agent.md",
      "model": "haiku",
      "description": "Normalizes data formats. Phone numbers, addresses, currencies, dates, emails, names.",
      "triggers": ["normalize", "standardize", "format", "clean data"]
    },
    "validator-agent": {
      "callsign": "Sentinel",
      "path": "agents/validator-agent.md",
      "model": "sonnet",
      "description": "Validates data against target schema constraints. Required fields, types, formats, relationships.",
      "triggers": ["validate", "check data", "verify", "quality check"]
    },
    "deduplicator-agent": {
      "callsign": "Prism",
      "path": "agents/deduplicator-agent.md",
      "model": "sonnet",
      "description": "Detects and resolves duplicates using fuzzy matching. Proposes merge strategies, identifies master records.",
      "triggers": ["find duplicates", "dedupe", "merge records", "detect dups"]
    },
    "reference-linker-agent": {
      "callsign": "Weaver",
      "path": "agents/reference-linker-agent.md",
      "model": "sonnet",
      "description": "Resolves cross-references and foreign keys. Links related records, handles orphans, preserves hierarchies.",
      "triggers": ["link references", "resolve foreign keys", "connect records", "fix orphans"]
    },
    "conflict-resolver-agent": {
      "callsign": "Arbiter",
      "path": "agents/conflict-resolver-agent.md",
      "model": "opus",
      "description": "Resolves conflicts when same record exists in multiple sources. Determines winner, merges fields, tracks lineage.",
      "triggers": ["resolve conflict", "merge sources", "determine winner", "reconcile"]
    },
    "batch-executor-agent": {
      "callsign": "Forge",
      "path": "agents/batch-executor-agent.md",
      "model": "haiku",
      "description": "Executes migration in optimized batches. Parallel processing, checkpointing, memory management.",
      "triggers": ["execute batch", "process chunk", "bulk insert", "parallel load"]
    },
    "transaction-guardian-agent": {
      "callsign": "Citadel",
      "path": "agents/transaction-guardian-agent.md",
      "model": "sonnet",
      "description": "Manages transactions with ACID guarantees. Savepoints, rollback, deadlock handling, isolation.",
      "triggers": ["begin transaction", "commit", "rollback", "savepoint"]
    },
    "progress-tracker-agent": {
      "callsign": "Beacon",
      "path": "agents/progress-tracker-agent.md",
      "model": "haiku",
      "description": "Tracks migration progress in real-time. ETA calculation, throughput metrics, bottleneck detection.",
      "triggers": ["track progress", "show status", "estimate time", "migration status"]
    },
    "verification-agent": {
      "callsign": "Inspector",
      "path": "agents/verification-agent.md",
      "model": "sonnet",
      "description": "Verifies migration success. Record counts, checksums, sample validation, relationship integrity.",
      "triggers": ["verify migration", "check counts", "validate import", "compare data"]
    },
    "audit-chronicler-agent": {
      "callsign": "Chronicler",
      "path": "agents/audit-chronicler-agent.md",
      "model": "haiku",
      "description": "Creates immutable audit trail. Who/what/when, decision logging, compliance reports, data lineage.",
      "triggers": ["log audit", "track change", "compliance", "audit trail"]
    },
    "rollback-guardian-agent": {
      "callsign": "Phoenix",
      "path": "agents/rollback-guardian-agent.md",
      "model": "sonnet",
      "description": "Manages rollback capabilities. Creates restore points, executes rollback, preserves original state.",
      "triggers": ["rollback", "undo migration", "restore", "revert"]
    },
    "orchestrator-agent": {
      "callsign": "Conductor",
      "path": "agents/orchestrator-agent.md",
      "model": "opus",
      "description": "Master orchestrator coordinating all migration phases. Manages agent delegation, handles failures, ensures completion.",
      "triggers": ["start migration", "orchestrate", "run import", "migrate customer"]
    }
  },

  "agentCallsigns": {
    "summary": "All 17 agents with unique callsigns",
    "roster": [
      { "agent": "connection-broker-agent", "callsign": "Harbinger", "role": "Connection management" },
      { "agent": "source-extractor-agent", "callsign": "Excavator", "role": "Data extraction" },
      { "agent": "schema-introspector-agent", "callsign": "Oracle", "role": "Schema analysis" },
      { "agent": "field-alchemist-agent", "callsign": "Alchemist", "role": "Field mapping" },
      { "agent": "transformer-agent", "callsign": "Morpheus", "role": "Data transformation" },
      { "agent": "normalizer-agent", "callsign": "Refiner", "role": "Data normalization" },
      { "agent": "validator-agent", "callsign": "Sentinel", "role": "Validation" },
      { "agent": "deduplicator-agent", "callsign": "Prism", "role": "Duplicate detection" },
      { "agent": "reference-linker-agent", "callsign": "Weaver", "role": "Reference linking" },
      { "agent": "conflict-resolver-agent", "callsign": "Arbiter", "role": "Conflict resolution" },
      { "agent": "batch-executor-agent", "callsign": "Forge", "role": "Batch execution" },
      { "agent": "transaction-guardian-agent", "callsign": "Citadel", "role": "Transaction management" },
      { "agent": "progress-tracker-agent", "callsign": "Beacon", "role": "Progress tracking" },
      { "agent": "verification-agent", "callsign": "Inspector", "role": "Verification" },
      { "agent": "audit-chronicler-agent", "callsign": "Chronicler", "role": "Audit logging" },
      { "agent": "rollback-guardian-agent", "callsign": "Phoenix", "role": "Rollback management" },
      { "agent": "orchestrator-agent", "callsign": "Conductor", "role": "Master orchestration" }
    ]
  },

  "workflows": {
    "salesforce-to-lobbi": {
      "path": "workflows/salesforce-migration.yaml",
      "description": "Migrate Salesforce org to your schema",
      "adapter": "salesforce",
      "estimatedDuration": "2-8 hours"
    },
    "hubspot-to-lobbi": {
      "path": "workflows/hubspot-migration.yaml",
      "description": "Migrate HubSpot portal to your schema",
      "adapter": "hubspot",
      "estimatedDuration": "2-6 hours"
    },
    "stripe-to-lobbi": {
      "path": "workflows/stripe-migration.yaml",
      "description": "Migrate Stripe billing data to your schema",
      "adapter": "stripe",
      "estimatedDuration": "1-4 hours"
    },
    "legacy-db-to-lobbi": {
      "path": "workflows/database-migration.yaml",
      "description": "Migrate legacy database to your schema",
      "adapter": "postgresql|mysql|sqlserver|oracle",
      "estimatedDuration": "4-24 hours"
    },
    "csv-import": {
      "path": "workflows/csv-onboarding.yaml",
      "description": "Import CSV/Excel files to your schema",
      "adapter": "csv|excel",
      "estimatedDuration": "1-4 hours"
    },
    "multi-source-consolidation": {
      "path": "workflows/multi-source.yaml",
      "description": "Consolidate multiple sources into your schema",
      "adapters": ["any"],
      "estimatedDuration": "4-48 hours"
    },
    "incremental-sync": {
      "path": "workflows/incremental-sync.yaml",
      "description": "Ongoing sync from external source",
      "adapters": ["any"],
      "estimatedDuration": "ongoing"
    }
  },

  "commands": {
    "tf-init": {
      "description": "Initialize migration project, detect target schema",
      "usage": "/tf-init --target prisma://schema.prisma"
    },
    "tf-connect": {
      "description": "Connect to source system",
      "usage": "/tf-connect salesforce --auth oauth2"
    },
    "tf-plan": {
      "description": "Generate migration plan (like terraform plan)",
      "usage": "/tf-plan --source salesforce --entities Contact,Account"
    },
    "tf-apply": {
      "description": "Execute migration plan",
      "usage": "/tf-apply --plan migration-plan-001.json"
    },
    "tf-import": {
      "description": "Import specific entity from source",
      "usage": "/tf-import salesforce.Contact --to Customer"
    },
    "tf-state": {
      "description": "Show migration state",
      "usage": "/tf-state show"
    },
    "tf-rollback": {
      "description": "Rollback to previous state",
      "usage": "/tf-rollback --to checkpoint-001"
    },
    "tf-validate": {
      "description": "Validate data before import",
      "usage": "/tf-validate --source salesforce.Contact"
    },
    "tf-diff": {
      "description": "Show differences between source and target",
      "usage": "/tf-diff salesforce.Contact vs Customer"
    }
  },

  "configuration": {
    "targetSchema": {
      "type": "string",
      "description": "Path to your schema definition (Prisma, TypeORM, etc.)",
      "required": true
    },
    "defaultAdapter": {
      "type": "string",
      "description": "Default source adapter to use"
    },
    "batchSize": {
      "type": "number",
      "default": 1000,
      "description": "Records per batch"
    },
    "parallelBatches": {
      "type": "number",
      "default": 4,
      "description": "Concurrent batch processing"
    },
    "dryRunFirst": {
      "type": "boolean",
      "default": true,
      "description": "Always run validation before actual migration"
    },
    "auditLevel": {
      "type": "string",
      "enum": ["minimal", "standard", "comprehensive"],
      "default": "standard"
    }
  },

  "activation": {
    "auto": true,
    "priority": 900,
    "keywords": [
      "terraform", "terraformer", "migrate", "import", "onboard",
      "salesforce", "hubspot", "stripe", "zendesk", "legacy",
      "customer data", "data migration", "csv import", "database migration"
    ]
  }
}

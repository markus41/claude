{
  "$schema": "../../core/schemas/plugin.schema.json",
  "name": "git-workflow-orchestrator",
  "displayName": "Git Workflow Orchestrator",
  "callsign": "Sentinel",
  "faction": "Forerunner",
  "version": "1.0.0",
  "description": "Sentinel - Guardian of the codebase timeline. Orchestrates advanced Git workflows including trunk-based development, GitFlow, ship/show/ask patterns, branch protection, rebasing strategies, conflict resolution, and merge automation. Integrates with Jira for linked branches and smart commits.",
  "author": {
    "name": "The Lobbi",
    "email": "developers@thelobbi.io"
  },
  "license": "MIT",
  "repository": "https://github.com/Lobbi-Docs/claude",
  "categories": ["devops", "development", "git", "automation"],
  "keywords": [
    "git", "branch", "merge", "rebase", "conflict-resolution",
    "gitflow", "trunk-based", "feature-flags", "pull-request",
    "code-review", "branch-protection", "semantic-versioning",
    "commit-linting", "conventional-commits", "squash", "cherry-pick",
    "stash", "worktree", "bisect", "reflog", "hooks"
  ],

  "provides": {
    "commands": 15,
    "agents": 10,
    "skills": 6,
    "hooks": 5
  },

  "integrations": {
    "jira-orchestrator": {
      "description": "Links branches to Jira issues, enforces smart commit messages",
      "commands": ["git:branch", "git:commit", "git:pr"],
      "bidirectional": true
    },
    "code-quality-orchestrator": {
      "description": "Enforces quality gates before merge/commit",
      "commands": ["git:commit", "git:merge", "git:pr"],
      "blocking": true
    }
  },

  "workflows": {
    "trunk-based": {
      "name": "Trunk-Based Development",
      "version": "1.0.0",
      "description": "Short-lived feature branches, frequent integration to main",
      "branchLifespan": "1-2 days",
      "featureFlags": true,
      "requiredChecks": ["lint", "test", "security"]
    },
    "gitflow": {
      "name": "GitFlow Workflow",
      "version": "1.0.0",
      "description": "Long-running develop/release/hotfix branches",
      "branches": {
        "main": { "protected": true, "requirePR": true },
        "develop": { "protected": true, "requirePR": true },
        "feature/*": { "maxLifespan": "2 weeks" },
        "release/*": { "requireApproval": true },
        "hotfix/*": { "priority": "high" }
      }
    },
    "ship-show-ask": {
      "name": "Ship/Show/Ask",
      "version": "1.0.0",
      "description": "Autonomy-based workflow - ship direct, show for awareness, ask for review",
      "modes": {
        "ship": { "description": "Merge directly (trivial changes)", "autoMerge": true },
        "show": { "description": "Create PR for visibility, no blocking review" },
        "ask": { "description": "Require explicit approval before merge" }
      }
    }
  },

  "commands": {
    "git:branch": "commands/branch.md",
    "git:commit": "commands/commit.md",
    "git:merge": "commands/merge.md",
    "git:rebase": "commands/rebase.md",
    "git:pr": "commands/pr.md",
    "git:conflict": "commands/conflict.md",
    "git:stash": "commands/stash.md",
    "git:bisect": "commands/bisect.md",
    "git:reflog": "commands/reflog.md",
    "git:worktree": "commands/worktree.md",
    "git:cherry-pick": "commands/cherry-pick.md",
    "git:squash": "commands/squash.md",
    "git:hooks": "commands/hooks.md",
    "git:workflow": "commands/workflow.md",
    "git:status": "commands/status.md"
  },

  "agents": {
    "branch-strategy-agent": {
      "path": "agents/branch-strategy-agent.md",
      "model": "sonnet",
      "description": "Recommends optimal branching strategies based on team size and project needs",
      "triggers": ["branch strategy", "branching model", "gitflow vs trunk"]
    },
    "conflict-resolver-agent": {
      "path": "agents/conflict-resolver-agent.md",
      "model": "opus",
      "description": "Analyzes and suggests resolutions for complex merge conflicts",
      "triggers": ["merge conflict", "resolve conflict", "conflict resolution"]
    },
    "commit-linter-agent": {
      "path": "agents/commit-linter-agent.md",
      "model": "haiku",
      "description": "Enforces conventional commit format and semantic versioning",
      "triggers": ["commit message", "conventional commit", "lint commit"]
    },
    "rebase-orchestrator-agent": {
      "path": "agents/rebase-orchestrator-agent.md",
      "model": "sonnet",
      "description": "Manages complex rebase operations with conflict tracking",
      "triggers": ["rebase", "interactive rebase", "rebase onto"]
    },
    "pr-reviewer-agent": {
      "path": "agents/pr-reviewer-agent.md",
      "model": "sonnet",
      "description": "Analyzes PRs for quality, complexity, and risk",
      "triggers": ["review pr", "pr analysis", "pull request review"]
    },
    "merge-strategy-agent": {
      "path": "agents/merge-strategy-agent.md",
      "model": "haiku",
      "description": "Recommends merge vs rebase vs squash based on context",
      "triggers": ["merge strategy", "squash merge", "rebase merge"]
    },
    "branch-cleanup-agent": {
      "path": "agents/branch-cleanup-agent.md",
      "model": "haiku",
      "description": "Identifies and cleans up stale or merged branches",
      "triggers": ["cleanup branches", "stale branches", "prune"]
    },
    "git-history-agent": {
      "path": "agents/git-history-agent.md",
      "model": "sonnet",
      "description": "Analyzes git history for patterns, contributors, and hotspots",
      "triggers": ["git history", "blame", "contributors", "hotspots"]
    },
    "bisect-agent": {
      "path": "agents/bisect-agent.md",
      "model": "sonnet",
      "description": "Automates git bisect to find bug-introducing commits",
      "triggers": ["git bisect", "find bug", "regression hunt"]
    },
    "worktree-manager-agent": {
      "path": "agents/worktree-manager-agent.md",
      "model": "haiku",
      "description": "Manages git worktrees for parallel development",
      "triggers": ["worktree", "parallel branches", "multiple checkouts"]
    }
  },

  "skills": {
    "branch-management": {
      "path": "skills/branch-management.md",
      "description": "Branch creation, naming conventions, and lifecycle management",
      "triggers": ["branch", "create branch", "delete branch", "rename branch"]
    },
    "commit-hygiene": {
      "path": "skills/commit-hygiene.md",
      "description": "Conventional commits, atomic commits, and message formatting",
      "triggers": ["commit", "commit message", "conventional commit", "atomic"]
    },
    "merge-rebase": {
      "path": "skills/merge-rebase.md",
      "description": "Merge and rebase strategies, conflict resolution",
      "triggers": ["merge", "rebase", "conflict", "fast-forward"]
    },
    "pr-workflow": {
      "path": "skills/pr-workflow.md",
      "description": "Pull request creation, review, and merge workflows",
      "triggers": ["pull request", "pr", "code review", "merge request"]
    },
    "git-recovery": {
      "path": "skills/git-recovery.md",
      "description": "Recovery operations: reflog, reset, revert, cherry-pick",
      "triggers": ["recover", "reflog", "reset", "revert", "undo"]
    },
    "advanced-git": {
      "path": "skills/advanced-git.md",
      "description": "Advanced operations: bisect, worktrees, submodules, sparse checkout",
      "triggers": ["bisect", "worktree", "submodule", "sparse", "lfs"]
    }
  },

  "hooks": {
    "preCommit": {
      "script": "hooks/scripts/pre-commit-lint.sh",
      "description": "Validates commit message format and runs linters"
    },
    "prePush": {
      "script": "hooks/scripts/pre-push-checks.sh",
      "description": "Runs tests and security scans before push"
    },
    "postMerge": {
      "script": "hooks/scripts/post-merge-notify.sh",
      "description": "Notifies team and updates Jira on successful merge"
    },
    "preRebase": {
      "script": "hooks/scripts/pre-rebase-backup.sh",
      "description": "Creates backup before rebase operations"
    },
    "branchProtection": {
      "script": "hooks/scripts/branch-protection.sh",
      "description": "Enforces branch protection rules"
    }
  },

  "permissions": {
    "filesystem": [
      { "path": ".git/**", "access": "readwrite" },
      { "path": ".gitignore", "access": "readwrite" },
      { "path": ".gitattributes", "access": "readwrite" }
    ],
    "tools": ["Bash", "Read", "Write", "Edit", "Grep", "Glob", "Task"],
    "mcpServers": ["github"]
  },

  "configuration": {
    "schema": {
      "type": "object",
      "properties": {
        "workflow": {
          "type": "string",
          "enum": ["trunk-based", "gitflow", "ship-show-ask"],
          "default": "trunk-based"
        },
        "conventionalCommits": {
          "type": "boolean",
          "default": true
        },
        "autoSquash": {
          "type": "boolean",
          "default": false
        },
        "branchNamingPattern": {
          "type": "string",
          "default": "{type}/{issueKey}-{description}"
        },
        "requireLinkedIssue": {
          "type": "boolean",
          "default": true
        }
      }
    }
  },

  "activation": {
    "auto": true,
    "priority": 850,
    "conditions": {
      "filePatterns": [".git/**", ".gitignore", ".github/**"],
      "keywords": ["git", "branch", "commit", "merge", "rebase", "pr", "pull request"]
    }
  }
}

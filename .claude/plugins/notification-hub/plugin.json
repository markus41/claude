{
  "$schema": "../../core/schemas/plugin.schema.json",
  "name": "notification-hub",
  "displayName": "Notification Hub",
  "callsign": "Messenger",
  "faction": "Forerunner",
  "version": "1.0.0",
  "description": "Messenger - Voice across dimensions. Unified notification orchestration for Slack, Microsoft Teams, Discord, Email, and Webhooks. Manages approval workflows, escalation chains, and intelligent notification routing with digest and priority management.",
  "author": {
    "name": "The Lobbi",
    "email": "developers@thelobbi.io"
  },
  "license": "MIT",
  "repository": "https://github.com/Lobbi-Docs/claude",
  "categories": ["communication", "notifications", "automation", "workflow"],
  "keywords": [
    "notifications", "slack", "teams", "discord", "email",
    "webhooks", "alerts", "approvals", "escalation", "routing",
    "digest", "priority", "mute", "channels", "mentions",
    "on-call", "pagerduty", "opsgenie", "incident"
  ],

  "provides": {
    "commands": 14,
    "agents": 9,
    "skills": 5,
    "hooks": 5
  },

  "integrations": {
    "jira-orchestrator": {
      "description": "Notifies on Jira issue updates, status changes, assignments",
      "events": ["issue-created", "status-changed", "assigned", "commented"],
      "bidirectional": true
    },
    "git-workflow-orchestrator": {
      "description": "Notifies on PR events, merge, conflicts",
      "events": ["pr-created", "pr-merged", "conflict-detected", "review-requested"],
      "bidirectional": false
    },
    "release-orchestrator": {
      "description": "Sends release announcements and deployment notifications",
      "events": ["release-created", "deployed", "rollback"],
      "priority": "high"
    },
    "testing-orchestrator": {
      "description": "Alerts on test failures, coverage drops",
      "events": ["tests-failed", "coverage-dropped", "regression-detected"],
      "escalation": true
    }
  },

  "channels": {
    "slack": {
      "name": "Slack",
      "version": "1.0.0",
      "features": ["messages", "threads", "reactions", "blocks", "modals", "workflows"],
      "auth": "SLACK_BOT_TOKEN",
      "capabilities": {
        "richFormatting": true,
        "interactiveButtons": true,
        "fileUpload": true,
        "threads": true,
        "reactions": true
      }
    },
    "teams": {
      "name": "Microsoft Teams",
      "version": "1.0.0",
      "features": ["messages", "adaptive-cards", "mentions", "channels"],
      "auth": "TEAMS_WEBHOOK_URL",
      "capabilities": {
        "adaptiveCards": true,
        "mentions": true,
        "actions": true
      }
    },
    "discord": {
      "name": "Discord",
      "version": "1.0.0",
      "features": ["messages", "embeds", "reactions", "threads"],
      "auth": "DISCORD_WEBHOOK_URL",
      "capabilities": {
        "embeds": true,
        "reactions": true,
        "threads": true
      }
    },
    "email": {
      "name": "Email",
      "version": "1.0.0",
      "providers": ["sendgrid", "ses", "smtp"],
      "features": ["html", "attachments", "templates"],
      "auth": "EMAIL_API_KEY"
    },
    "webhook": {
      "name": "Custom Webhooks",
      "version": "1.0.0",
      "features": ["json-payload", "custom-headers", "retry"],
      "auth": "custom"
    },
    "pagerduty": {
      "name": "PagerDuty",
      "version": "1.0.0",
      "features": ["incidents", "on-call", "escalation"],
      "auth": "PAGERDUTY_API_KEY",
      "forIncidents": true
    }
  },

  "approvalWorkflows": {
    "simple": {
      "name": "Simple Approval",
      "description": "Single approver required",
      "approvers": 1,
      "timeout": "24h"
    },
    "multi-level": {
      "name": "Multi-Level Approval",
      "description": "Sequential approval chain",
      "levels": ["team-lead", "manager", "director"],
      "timeout": "48h"
    },
    "parallel": {
      "name": "Parallel Approval",
      "description": "Multiple approvers simultaneously",
      "approversRequired": "all|any|majority",
      "timeout": "24h"
    },
    "conditional": {
      "name": "Conditional Approval",
      "description": "Approval based on conditions (cost, risk, scope)",
      "conditions": {
        "lowRisk": { "approvers": 1 },
        "mediumRisk": { "approvers": 2 },
        "highRisk": { "approvers": "all-stakeholders" }
      }
    }
  },

  "commands": {
    "notify:send": "commands/send.md",
    "notify:slack": "commands/slack.md",
    "notify:teams": "commands/teams.md",
    "notify:discord": "commands/discord.md",
    "notify:email": "commands/email.md",
    "notify:webhook": "commands/webhook.md",
    "notify:approve": "commands/approve.md",
    "notify:escalate": "commands/escalate.md",
    "notify:digest": "commands/digest.md",
    "notify:mute": "commands/mute.md",
    "notify:preferences": "commands/preferences.md",
    "notify:oncall": "commands/oncall.md",
    "notify:incident": "commands/incident.md",
    "notify:status": "commands/status.md"
  },

  "agents": {
    "notification-router-agent": {
      "path": "agents/notification-router-agent.md",
      "model": "haiku",
      "description": "Routes notifications to optimal channels based on context and preferences",
      "triggers": ["notify", "send notification", "alert"]
    },
    "slack-composer-agent": {
      "path": "agents/slack-composer-agent.md",
      "model": "haiku",
      "description": "Composes rich Slack messages with blocks and formatting",
      "triggers": ["slack message", "slack notification"]
    },
    "teams-composer-agent": {
      "path": "agents/teams-composer-agent.md",
      "model": "haiku",
      "description": "Creates Adaptive Card messages for Teams",
      "triggers": ["teams message", "teams notification"]
    },
    "approval-workflow-agent": {
      "path": "agents/approval-workflow-agent.md",
      "model": "sonnet",
      "description": "Manages multi-level approval workflows with escalation",
      "triggers": ["approval", "approve request", "get approval"]
    },
    "escalation-manager-agent": {
      "path": "agents/escalation-manager-agent.md",
      "model": "sonnet",
      "description": "Manages escalation chains and timeout handling",
      "triggers": ["escalate", "escalation", "timeout"]
    },
    "digest-generator-agent": {
      "path": "agents/digest-generator-agent.md",
      "model": "haiku",
      "description": "Creates digest summaries of multiple notifications",
      "triggers": ["digest", "summary", "daily digest"]
    },
    "priority-classifier-agent": {
      "path": "agents/priority-classifier-agent.md",
      "model": "haiku",
      "description": "Classifies notification priority and urgency",
      "triggers": ["priority", "urgent", "critical"]
    },
    "oncall-router-agent": {
      "path": "agents/oncall-router-agent.md",
      "model": "haiku",
      "description": "Routes to on-call personnel based on schedules",
      "triggers": ["on-call", "oncall", "pager"]
    },
    "incident-notifier-agent": {
      "path": "agents/incident-notifier-agent.md",
      "model": "sonnet",
      "description": "Manages incident notifications and war room coordination",
      "triggers": ["incident", "outage", "war room"]
    }
  },

  "skills": {
    "slack-integration": {
      "path": "skills/slack-integration.md",
      "description": "Slack API, Block Kit, Workflows",
      "triggers": ["slack", "block kit", "slack api"]
    },
    "teams-integration": {
      "path": "skills/teams-integration.md",
      "description": "Teams Adaptive Cards, Connectors",
      "triggers": ["teams", "adaptive card", "teams webhook"]
    },
    "approval-workflows": {
      "path": "skills/approval-workflows.md",
      "description": "Multi-level approvals, conditional routing",
      "triggers": ["approval", "workflow", "sign-off"]
    },
    "escalation-management": {
      "path": "skills/escalation-management.md",
      "description": "Escalation chains, timeouts, on-call routing",
      "triggers": ["escalation", "on-call", "pagerduty"]
    },
    "notification-templates": {
      "path": "skills/notification-templates.md",
      "description": "Rich notification templates and formatting",
      "triggers": ["notification template", "message format"]
    }
  },

  "hooks": {
    "onJiraUpdate": {
      "script": "hooks/scripts/jira-notification.sh",
      "description": "Sends notifications on Jira issue updates"
    },
    "onPREvent": {
      "script": "hooks/scripts/pr-notification.sh",
      "description": "Notifies on PR creation, review, merge"
    },
    "onTestFailure": {
      "script": "hooks/scripts/test-failure-alert.sh",
      "description": "Alerts on critical test failures"
    },
    "onDeployment": {
      "script": "hooks/scripts/deployment-notification.sh",
      "description": "Announces deployments and releases"
    },
    "onApprovalTimeout": {
      "script": "hooks/scripts/approval-escalation.sh",
      "description": "Escalates on approval timeout"
    }
  },

  "templates": {
    "slack": {
      "prCreated": "templates/slack/pr-created.json",
      "testFailed": "templates/slack/test-failed.json",
      "deployed": "templates/slack/deployed.json",
      "approvalRequest": "templates/slack/approval-request.json"
    },
    "teams": {
      "prCreated": "templates/teams/pr-created.json",
      "testFailed": "templates/teams/test-failed.json",
      "deployed": "templates/teams/deployed.json"
    },
    "email": {
      "digest": "templates/email/digest.html",
      "incident": "templates/email/incident.html"
    }
  },

  "permissions": {
    "filesystem": [
      { "path": ".claude/notifications/**", "access": "readwrite" }
    ],
    "tools": ["Bash", "Read", "Write", "Task", "WebFetch"],
    "mcpServers": []
  },

  "configuration": {
    "schema": {
      "type": "object",
      "properties": {
        "defaultChannel": {
          "type": "string",
          "enum": ["slack", "teams", "discord", "email"],
          "default": "slack"
        },
        "digestFrequency": {
          "type": "string",
          "enum": ["realtime", "hourly", "daily", "weekly"],
          "default": "realtime"
        },
        "escalationTimeout": {
          "type": "string",
          "default": "4h"
        },
        "quietHours": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean", "default": false },
            "start": { "type": "string", "default": "22:00" },
            "end": { "type": "string", "default": "08:00" }
          }
        },
        "priorityOverride": {
          "type": "boolean",
          "default": true,
          "description": "Allow high-priority notifications during quiet hours"
        }
      }
    }
  },

  "activation": {
    "auto": true,
    "priority": 700,
    "conditions": {
      "keywords": ["notify", "slack", "teams", "email", "alert", "approval", "escalate"]
    }
  }
}

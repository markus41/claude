{
  "$schema": "../../core/schemas/plugin.schema.json",
  "name": "code-quality-orchestrator",
  "displayName": "Code Quality Orchestrator",
  "callsign": "Curator",
  "faction": "Forerunner",
  "version": "1.0.0",
  "description": "Curator - Ancient guardian of code excellence. Orchestrates 5 quality gates (Static Analysis, Test Coverage, Security Scanning, Complexity Analysis, Dependency Health) in a unified flow. Ensures pristine code through Forerunner precision and automated enforcement.",
  "author": {
    "name": "Brookside BI",
    "email": "plugins@brooksidebi.com"
  },
  "license": "MIT",
  "repository": "https://github.com/Lobbi-Docs/claude",
  "categories": ["devops", "testing", "security", "code-generation"],
  "keywords": [
    "code-quality", "linting", "eslint", "prettier", "static-analysis",
    "test-coverage", "security-scanning", "complexity", "dependencies",
    "pre-commit", "ci-cd", "quality-gates", "orchestration", "clean-code"
  ],

  "provides": {
    "commands": 12,
    "agents": 8,
    "skills": 5,
    "hooks": 6
  },

  "qualityGates": {
    "description": "5 integrated quality gates that enforce clean code production",
    "gates": {
      "static-analysis": {
        "name": "Static Analysis Gate",
        "version": "1.0.0",
        "description": "Integrates ESLint, Prettier, Pylint, Golint and other language-specific linters",
        "tools": ["eslint", "prettier", "pylint", "golint", "rustfmt", "rubocop"],
        "enforcement": "pre-code",
        "severity": "error",
        "autoFix": true
      },
      "test-coverage": {
        "name": "Test Coverage Enforcer",
        "version": "1.0.0",
        "description": "Enforces minimum test coverage thresholds before code completion",
        "tools": ["vitest", "jest", "pytest-cov", "istanbul", "c8"],
        "thresholds": {
          "statements": 80,
          "branches": 75,
          "functions": 80,
          "lines": 80
        },
        "enforcement": "pre-commit",
        "severity": "error"
      },
      "security-scanner": {
        "name": "Security Vulnerability Scanner",
        "version": "1.0.0",
        "description": "Scans for OWASP vulnerabilities, secrets, and security anti-patterns",
        "tools": ["trivy", "bandit", "npm-audit", "semgrep", "gitleaks", "trufflehog"],
        "severity": "error",
        "scanTypes": ["secrets", "vulnerabilities", "misconfigurations", "sast"]
      },
      "complexity-analyzer": {
        "name": "Code Complexity Analyzer",
        "version": "1.0.0",
        "description": "Measures and enforces cyclomatic complexity, cognitive complexity, and maintainability",
        "tools": ["eslint-plugin-complexity", "radon", "lizard", "sonarqube"],
        "thresholds": {
          "cyclomaticComplexity": 10,
          "cognitiveComplexity": 15,
          "maintainabilityIndex": 20,
          "maxFileLength": 500,
          "maxFunctionLength": 50
        },
        "enforcement": "pre-commit",
        "severity": "warning"
      },
      "dependency-health": {
        "name": "Dependency Health Checker",
        "version": "1.0.0",
        "description": "Checks for outdated, deprecated, or vulnerable dependencies",
        "tools": ["npm-outdated", "pip-audit", "dependabot", "renovate", "snyk"],
        "checks": ["outdated", "deprecated", "vulnerabilities", "licenses"],
        "enforcement": "pre-commit",
        "severity": "warning"
      }
    }
  },

  "orchestration": {
    "enabled": true,
    "mandatory": true,
    "protocol": {
      "version": "2.0.0",
      "minSubAgents": 2,
      "maxSubAgents": 8,
      "defaultSubAgents": 5
    },
    "qualityFlow": {
      "phases": [
        {
          "id": "pre-code",
          "name": "Pre-Code Analysis",
          "gates": ["static-analysis"],
          "parallel": false,
          "required": true
        },
        {
          "id": "during-code",
          "name": "Live Code Monitoring",
          "gates": ["complexity-analyzer"],
          "parallel": true,
          "required": false
        },
        {
          "id": "pre-commit",
          "name": "Pre-Commit Validation",
          "gates": ["static-analysis", "test-coverage", "security-scanner", "complexity-analyzer", "dependency-health"],
          "parallel": true,
          "required": true
        },
        {
          "id": "post-commit",
          "name": "Post-Commit Verification",
          "gates": ["security-scanner"],
          "parallel": false,
          "required": false
        }
      ],
      "failurePolicy": {
        "onError": "block",
        "onWarning": "warn",
        "allowBypass": false,
        "bypassRequiresApproval": true
      }
    }
  },

  "commands": {
    "quality-check": "commands/quality-check.md",
    "quality-fix": "commands/quality-fix.md",
    "quality-report": "commands/quality-report.md",
    "coverage-check": "commands/coverage-check.md",
    "security-scan": "commands/security-scan.md",
    "complexity-audit": "commands/complexity-audit.md",
    "dependency-audit": "commands/dependency-audit.md",
    "lint-all": "commands/lint-all.md",
    "format-all": "commands/format-all.md",
    "quality-gate-status": "commands/quality-gate-status.md",
    "quality-configure": "commands/quality-configure.md",
    "quality-baseline": "commands/quality-baseline.md"
  },

  "agents": {
    "static-analysis-agent": {
      "path": "agents/static-analysis-agent.md",
      "model": "haiku",
      "description": "Runs ESLint, Prettier, and language-specific linters with auto-fix capabilities",
      "triggers": ["lint", "format", "eslint", "prettier", "check style"]
    },
    "test-coverage-agent": {
      "path": "agents/test-coverage-agent.md",
      "model": "sonnet",
      "description": "Analyzes test coverage, identifies gaps, and suggests test cases",
      "triggers": ["coverage", "test coverage", "missing tests", "coverage gap"]
    },
    "security-scanner-agent": {
      "path": "agents/security-scanner-agent.md",
      "model": "sonnet",
      "description": "Scans for security vulnerabilities, secrets, and OWASP issues",
      "triggers": ["security", "vulnerability", "secrets", "audit", "owasp"]
    },
    "complexity-analyzer-agent": {
      "path": "agents/complexity-analyzer-agent.md",
      "model": "haiku",
      "description": "Measures code complexity and suggests refactoring opportunities",
      "triggers": ["complexity", "refactor", "simplify", "maintainability"]
    },
    "dependency-health-agent": {
      "path": "agents/dependency-health-agent.md",
      "model": "haiku",
      "description": "Checks dependency health, outdated packages, and license compliance",
      "triggers": ["dependencies", "outdated", "npm audit", "pip audit"]
    },
    "quality-orchestrator-agent": {
      "path": "agents/quality-orchestrator-agent.md",
      "model": "sonnet",
      "description": "Master orchestrator that coordinates all quality gates in optimal sequence",
      "triggers": ["quality check", "full audit", "code review", "quality gates"]
    },
    "auto-fix-agent": {
      "path": "agents/auto-fix-agent.md",
      "model": "sonnet",
      "description": "Automatically fixes linting, formatting, and simple security issues",
      "triggers": ["auto fix", "fix issues", "fix all", "auto-correct"]
    },
    "quality-reporter-agent": {
      "path": "agents/quality-reporter-agent.md",
      "model": "haiku",
      "description": "Generates comprehensive quality reports in multiple formats",
      "triggers": ["quality report", "generate report", "quality summary"]
    }
  },

  "skills": {
    "static-analysis": {
      "path": "skills/static-analysis.md",
      "description": "Multi-language static analysis with ESLint, Prettier, Pylint, Golint integration",
      "triggers": ["lint", "format", "static analysis", "code style"]
    },
    "test-coverage": {
      "path": "skills/test-coverage.md",
      "description": "Test coverage analysis and threshold enforcement",
      "triggers": ["coverage", "test coverage", "coverage report"]
    },
    "security-scanning": {
      "path": "skills/security-scanning.md",
      "description": "Security vulnerability scanning with Trivy, Semgrep, and Gitleaks",
      "triggers": ["security scan", "vulnerability", "secrets detection"]
    },
    "complexity-analysis": {
      "path": "skills/complexity-analysis.md",
      "description": "Code complexity measurement and maintainability analysis",
      "triggers": ["complexity", "cyclomatic", "cognitive complexity"]
    },
    "dependency-health": {
      "path": "skills/dependency-health.md",
      "description": "Dependency auditing and health checking",
      "triggers": ["dependency audit", "outdated packages", "npm audit"]
    }
  },

  "hooks": {
    "preEdit": "hooks/pre-edit-quality-check.sh",
    "postEdit": "hooks/post-edit-quality-check.sh",
    "preCommit": "hooks/pre-commit-quality-gate.sh",
    "postTask": "hooks/post-task-quality-report.sh",
    "preToolUse": {
      "script": "hooks/pre-tool-quality-check.sh",
      "toolPattern": "Edit|Write|Bash",
      "description": "Validates code quality before file modifications"
    },
    "postToolUse": {
      "script": "hooks/post-tool-quality-verify.sh",
      "toolPattern": "Edit|Write",
      "description": "Verifies code quality after file modifications"
    }
  },

  "permissions": {
    "filesystem": [
      { "path": "**/*.{js,ts,jsx,tsx,py,go,rs,rb}", "access": "readwrite" },
      { "path": "**/package.json", "access": "read" },
      { "path": "**/requirements.txt", "access": "read" },
      { "path": "**/.eslintrc*", "access": "readwrite" },
      { "path": "**/prettier.config.*", "access": "readwrite" }
    ],
    "tools": ["Bash", "Read", "Write", "Edit", "Grep", "Glob", "Task"],
    "mcpServers": []
  },

  "configuration": {
    "schema": {
      "type": "object",
      "properties": {
        "staticAnalysis": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean", "default": true },
            "autoFix": { "type": "boolean", "default": true },
            "tools": { "type": "array", "items": { "type": "string" } }
          }
        },
        "testCoverage": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean", "default": true },
            "threshold": { "type": "number", "default": 80, "minimum": 0, "maximum": 100 }
          }
        },
        "securityScanner": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean", "default": true },
            "scanSecrets": { "type": "boolean", "default": true },
            "failOnHigh": { "type": "boolean", "default": true }
          }
        },
        "complexityAnalyzer": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean", "default": true },
            "maxCyclomaticComplexity": { "type": "number", "default": 10 },
            "maxCognitiveComplexity": { "type": "number", "default": 15 }
          }
        },
        "dependencyHealth": {
          "type": "object",
          "properties": {
            "enabled": { "type": "boolean", "default": true },
            "checkOutdated": { "type": "boolean", "default": true },
            "checkVulnerabilities": { "type": "boolean", "default": true }
          }
        }
      }
    }
  },

  "activation": {
    "auto": true,
    "priority": 900,
    "conditions": {
      "filePatterns": ["**/*.{js,ts,jsx,tsx,py,go,rs,rb,java,cs}"],
      "keywords": ["quality", "lint", "format", "coverage", "security", "audit"]
    }
  }
}

{
  "$schema": "../../core/schemas/plugin.schema.json",
  "name": "testing-orchestrator",
  "displayName": "Testing Orchestrator",
  "callsign": "Validator",
  "faction": "Forerunner",
  "version": "1.0.0",
  "description": "Validator - Arbiter of truth and correctness. Orchestrates comprehensive testing including unit tests, integration tests, E2E tests, performance tests, and regression detection. Integrates with Jira for test case linking and CI/CD for automated test execution.",
  "author": {
    "name": "The Lobbi",
    "email": "developers@thelobbi.io"
  },
  "license": "MIT",
  "repository": "https://github.com/Lobbi-Docs/claude",
  "keywords": [
    "testing", "unit-test", "integration-test", "e2e", "end-to-end",
    "pytest", "jest", "vitest", "playwright", "cypress",
    "tdd", "bdd", "coverage", "mutation-testing", "regression",
    "performance", "load-test", "k6", "locust", "artillery",
    "snapshot", "visual-regression", "accessibility", "a11y"
  ],

  "testTypes": {
    "unit": {
      "name": "Unit Tests",
      "frameworks": {
        "javascript": ["jest", "vitest", "mocha"],
        "python": ["pytest", "unittest", "nose2"],
        "go": ["testing", "testify"],
        "rust": ["cargo test"]
      },
      "coverageTarget": 80,
      "speed": "fast"
    },
    "integration": {
      "name": "Integration Tests",
      "frameworks": {
        "javascript": ["jest", "vitest", "supertest"],
        "python": ["pytest", "tavern"],
        "go": ["testing"]
      },
      "requires": ["database", "api"],
      "speed": "medium"
    },
    "e2e": {
      "name": "End-to-End Tests",
      "frameworks": ["playwright", "cypress", "puppeteer", "selenium"],
      "modes": ["headless", "headed"],
      "parallelization": true,
      "speed": "slow"
    },
    "performance": {
      "name": "Performance Tests",
      "tools": ["k6", "locust", "artillery", "jmeter"],
      "metrics": ["latency", "throughput", "error-rate", "p95", "p99"],
      "speed": "variable"
    },
    "visual": {
      "name": "Visual Regression",
      "tools": ["percy", "chromatic", "playwright-visual"],
      "comparison": "pixel-diff",
      "speed": "medium"
    },
    "accessibility": {
      "name": "Accessibility Tests",
      "tools": ["axe", "lighthouse", "pa11y"],
      "standards": ["wcag-aa", "wcag-aaa"],
      "speed": "fast"
    },
    "mutation": {
      "name": "Mutation Testing",
      "tools": ["stryker", "mutmut", "pitest"],
      "scoreTarget": 80,
      "speed": "slow"
    },
    "contract": {
      "name": "Contract Testing",
      "tools": ["pact", "spring-cloud-contract"],
      "type": ["consumer-driven", "provider"],
      "speed": "medium"
    }
  },

  "commands": {
    "test:run": "commands/run.md",
    "test:unit": "commands/unit.md",
    "test:integration": "commands/integration.md",
    "test:e2e": "commands/e2e.md",
    "test:performance": "commands/performance.md",
    "test:visual": "commands/visual.md",
    "test:a11y": "commands/accessibility.md",
    "test:mutation": "commands/mutation.md",
    "test:coverage": "commands/coverage.md",
    "test:watch": "commands/watch.md",
    "test:generate": "commands/generate.md",
    "test:regression": "commands/regression.md",
    "test:flaky": "commands/flaky.md",
    "test:report": "commands/report.md",
    "test:jira": "commands/jira.md",
    "test:parallel": "commands/parallel.md",
    "test:snapshot": "commands/snapshot.md",
    "test:status": "commands/status.md"
  },

  "agents": {
    "test-generator-agent": {
      "path": "agents/test-generator-agent.md",
      "model": "sonnet",
      "description": "Generates unit tests from code analysis",
      "triggers": ["generate tests", "create tests", "write tests for"]
    },
    "test-runner-agent": {
      "path": "agents/test-runner-agent.md",
      "model": "haiku",
      "description": "Executes test suites with optimal parallelization",
      "triggers": ["run tests", "execute tests", "test suite"]
    },
    "coverage-analyzer-agent": {
      "path": "agents/coverage-analyzer-agent.md",
      "model": "sonnet",
      "description": "Analyzes coverage gaps and suggests tests to increase coverage",
      "triggers": ["coverage", "test coverage", "coverage gap", "uncovered code"]
    },
    "regression-detector-agent": {
      "path": "agents/regression-detector-agent.md",
      "model": "sonnet",
      "description": "Identifies potential regressions from code changes",
      "triggers": ["regression", "detect regression", "what might break"]
    },
    "flaky-test-hunter-agent": {
      "path": "agents/flaky-test-hunter-agent.md",
      "model": "sonnet",
      "description": "Identifies and fixes flaky tests",
      "triggers": ["flaky test", "intermittent failure", "unstable test"]
    },
    "e2e-scenario-agent": {
      "path": "agents/e2e-scenario-agent.md",
      "model": "opus",
      "description": "Designs E2E test scenarios from user stories",
      "triggers": ["e2e scenario", "user journey", "end to end test"]
    },
    "performance-test-agent": {
      "path": "agents/performance-test-agent.md",
      "model": "sonnet",
      "description": "Creates and runs performance/load tests",
      "triggers": ["performance test", "load test", "stress test", "benchmark"]
    },
    "mutation-test-agent": {
      "path": "agents/mutation-test-agent.md",
      "model": "sonnet",
      "description": "Runs mutation testing to validate test quality",
      "triggers": ["mutation test", "test quality", "mutation score"]
    },
    "accessibility-audit-agent": {
      "path": "agents/accessibility-audit-agent.md",
      "model": "haiku",
      "description": "Runs accessibility audits and generates reports",
      "triggers": ["accessibility", "a11y", "wcag", "screen reader"]
    },
    "test-refactor-agent": {
      "path": "agents/test-refactor-agent.md",
      "model": "sonnet",
      "description": "Refactors tests for maintainability and speed",
      "triggers": ["refactor tests", "improve tests", "test maintenance"]
    },
    "mock-generator-agent": {
      "path": "agents/mock-generator-agent.md",
      "model": "haiku",
      "description": "Generates mocks, stubs, and fixtures",
      "triggers": ["mock", "stub", "fixture", "test double"]
    },
    "test-report-agent": {
      "path": "agents/test-report-agent.md",
      "model": "haiku",
      "description": "Generates comprehensive test reports with trends",
      "triggers": ["test report", "test results", "test summary"]
    }
  },

  "skills": {
    "unit-testing": {
      "path": "skills/unit-testing.md",
      "description": "Unit testing patterns, pytest, jest, vitest",
      "triggers": ["unit test", "pytest", "jest", "vitest"]
    },
    "integration-testing": {
      "path": "skills/integration-testing.md",
      "description": "Integration testing with databases, APIs, services",
      "triggers": ["integration test", "api test", "database test"]
    },
    "e2e-testing": {
      "path": "skills/e2e-testing.md",
      "description": "Playwright, Cypress, browser automation",
      "triggers": ["e2e", "playwright", "cypress", "browser test"]
    },
    "tdd-bdd": {
      "path": "skills/tdd-bdd.md",
      "description": "Test-Driven and Behavior-Driven Development",
      "triggers": ["tdd", "bdd", "test first", "given when then"]
    },
    "mocking": {
      "path": "skills/mocking.md",
      "description": "Mocking, stubbing, faking, test doubles",
      "triggers": ["mock", "stub", "fake", "spy", "test double"]
    },
    "performance-testing": {
      "path": "skills/performance-testing.md",
      "description": "Load testing with k6, locust, artillery",
      "triggers": ["performance", "load test", "k6", "locust"]
    },
    "test-patterns": {
      "path": "skills/test-patterns.md",
      "description": "Testing patterns: AAA, fixtures, factories, builders",
      "triggers": ["test pattern", "arrange act assert", "fixture", "factory"]
    },
    "ci-integration": {
      "path": "skills/ci-integration.md",
      "description": "CI/CD test integration, parallel execution, caching",
      "triggers": ["ci test", "github actions", "parallel tests", "test cache"]
    }
  },

  "hooks": {
    "preCommit": {
      "script": "hooks/scripts/pre-commit-test.sh",
      "description": "Runs relevant tests before commit"
    },
    "prePush": {
      "script": "hooks/scripts/pre-push-full-test.sh",
      "description": "Runs full test suite before push"
    },
    "postCodeEdit": {
      "script": "hooks/scripts/suggest-tests.sh",
      "description": "Suggests tests for modified code"
    },
    "prePR": {
      "script": "hooks/scripts/pr-test-gate.sh",
      "description": "Enforces test requirements for PRs"
    },
    "onTestFailure": {
      "script": "hooks/scripts/on-failure-notify.sh",
      "description": "Notifies team on critical test failures"
    },
    "postTestRun": {
      "script": "hooks/scripts/post-test-report.sh",
      "description": "Generates and stores test reports"
    }
  },

  "permissions": {
    "filesystem": [
      { "path": "**/*.test.*", "access": "readwrite" },
      { "path": "**/*.spec.*", "access": "readwrite" },
      { "path": "**/tests/**", "access": "readwrite" },
      { "path": "**/__tests__/**", "access": "readwrite" },
      { "path": "**/coverage/**", "access": "read" }
    ],
    "tools": ["Bash", "Read", "Write", "Edit", "Grep", "Glob", "Task"],
    "mcpServers": []
  },

  "configuration": {
    "schema": {
      "type": "object",
      "properties": {
        "defaultFramework": {
          "type": "string",
          "enum": ["jest", "vitest", "pytest", "playwright", "cypress"],
          "default": "vitest"
        },
        "coverageThreshold": {
          "type": "object",
          "properties": {
            "statements": { "type": "number", "default": 80 },
            "branches": { "type": "number", "default": 75 },
            "functions": { "type": "number", "default": 80 },
            "lines": { "type": "number", "default": 80 }
          }
        },
        "parallelExecution": {
          "type": "boolean",
          "default": true
        },
        "retryFlaky": {
          "type": "number",
          "default": 2,
          "minimum": 0,
          "maximum": 5
        },
        "requireTestsForPR": {
          "type": "boolean",
          "default": true
        }
      }
    }
  },

  "activation": {
    "auto": true,
    "priority": 875,
    "conditions": {
      "filePatterns": ["**/*.test.*", "**/*.spec.*", "**/tests/**", "**/__tests__/**"],
      "keywords": ["test", "testing", "coverage", "e2e", "unit test", "integration test"]
    }
  }
}

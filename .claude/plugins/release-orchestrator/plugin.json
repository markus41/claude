{
  "$schema": "../../core/schemas/plugin.schema.json",
  "name": "release-orchestrator",
  "displayName": "Release Orchestrator",
  "callsign": "Herald",
  "faction": "Forerunner",
  "version": "1.0.0",
  "description": "Herald - Announcer of new horizons. Orchestrates the complete release lifecycle including semantic versioning, changelog generation, release notes, deployment coordination, rollback management, and feature flag integration. Integrates with Jira for release tracking and GitHub for automated releases.",
  "author": {
    "name": "The Lobbi",
    "email": "developers@thelobbi.io"
  },
  "license": "MIT",
  "repository": "https://github.com/Lobbi-Docs/claude",
  "categories": ["devops", "release", "deployment", "automation"],
  "keywords": [
    "release", "versioning", "semantic-version", "semver",
    "changelog", "release-notes", "deployment", "rollback",
    "feature-flags", "canary", "blue-green", "rolling-update",
    "tag", "github-release", "npm-publish", "docker-tag",
    "hotfix", "patch", "major", "minor"
  ],

  "provides": {
    "commands": 14,
    "agents": 9,
    "skills": 5,
    "hooks": 4
  },

  "integrations": {
    "jira-orchestrator": {
      "description": "Links releases to Jira versions, updates fix versions on issues",
      "commands": ["release:create", "release:publish", "release:notes"],
      "bidirectional": true
    },
    "git-workflow-orchestrator": {
      "description": "Creates release branches and tags",
      "commands": ["release:branch", "release:tag"],
      "required": true
    },
    "notification-hub": {
      "description": "Sends release announcements to all channels",
      "commands": ["release:announce"],
      "optional": true
    }
  },

  "versioningStrategies": {
    "semver": {
      "name": "Semantic Versioning",
      "version": "2.0.0",
      "description": "MAJOR.MINOR.PATCH versioning based on breaking/feature/fix changes",
      "rules": {
        "major": "Breaking changes, incompatible API changes",
        "minor": "New features, backwards-compatible additions",
        "patch": "Bug fixes, backwards-compatible fixes"
      },
      "prerelease": ["alpha", "beta", "rc"],
      "buildMetadata": true
    },
    "calver": {
      "name": "Calendar Versioning",
      "version": "1.0.0",
      "description": "Date-based versioning (YYYY.MM.DD or similar)",
      "formats": ["YYYY.MM.DD", "YYYY.MM", "YY.MM.MICRO"]
    },
    "incremental": {
      "name": "Incremental Build",
      "version": "1.0.0",
      "description": "Simple incrementing build numbers",
      "format": "BUILD_NUMBER"
    }
  },

  "deploymentStrategies": {
    "blue-green": {
      "name": "Blue-Green Deployment",
      "description": "Zero-downtime deployment with instant rollback capability",
      "steps": ["deploy-green", "health-check", "switch-traffic", "retire-blue"]
    },
    "canary": {
      "name": "Canary Release",
      "description": "Gradual rollout to subset of users before full release",
      "stages": [1, 5, 10, 25, 50, 100],
      "metrics": ["error-rate", "latency", "success-rate"]
    },
    "rolling": {
      "name": "Rolling Update",
      "description": "Gradual replacement of instances",
      "maxUnavailable": "25%",
      "maxSurge": "25%"
    },
    "recreate": {
      "name": "Recreate",
      "description": "Complete replacement (brief downtime)",
      "useCase": "Non-production or stateful applications"
    }
  },

  "commands": {
    "release:create": "commands/create.md",
    "release:publish": "commands/publish.md",
    "release:notes": "commands/notes.md",
    "release:changelog": "commands/changelog.md",
    "release:tag": "commands/tag.md",
    "release:branch": "commands/branch.md",
    "release:deploy": "commands/deploy.md",
    "release:rollback": "commands/rollback.md",
    "release:hotfix": "commands/hotfix.md",
    "release:canary": "commands/canary.md",
    "release:promote": "commands/promote.md",
    "release:status": "commands/status.md",
    "release:history": "commands/history.md",
    "release:announce": "commands/announce.md"
  },

  "agents": {
    "version-bumper-agent": {
      "path": "agents/version-bumper-agent.md",
      "model": "haiku",
      "description": "Determines version bump type from commit history using conventional commits",
      "triggers": ["bump version", "version bump", "next version"]
    },
    "changelog-generator-agent": {
      "path": "agents/changelog-generator-agent.md",
      "model": "sonnet",
      "description": "Generates formatted changelogs from commits and PRs",
      "triggers": ["changelog", "generate changelog", "release notes"]
    },
    "release-notes-agent": {
      "path": "agents/release-notes-agent.md",
      "model": "sonnet",
      "description": "Creates user-friendly release notes with highlights and breaking changes",
      "triggers": ["release notes", "what's new", "announcement"]
    },
    "deployment-orchestrator-agent": {
      "path": "agents/deployment-orchestrator-agent.md",
      "model": "opus",
      "description": "Coordinates multi-environment deployments with validation",
      "triggers": ["deploy", "release deploy", "promote to production"]
    },
    "rollback-agent": {
      "path": "agents/rollback-agent.md",
      "model": "sonnet",
      "description": "Manages rollback procedures and verifies system health",
      "triggers": ["rollback", "revert release", "undo deployment"]
    },
    "canary-analysis-agent": {
      "path": "agents/canary-analysis-agent.md",
      "model": "sonnet",
      "description": "Analyzes canary metrics to decide promote/rollback",
      "triggers": ["canary analysis", "canary metrics", "gradual rollout"]
    },
    "hotfix-agent": {
      "path": "agents/hotfix-agent.md",
      "model": "sonnet",
      "description": "Orchestrates emergency hotfix releases",
      "triggers": ["hotfix", "emergency fix", "patch release"]
    },
    "feature-flag-agent": {
      "path": "agents/feature-flag-agent.md",
      "model": "haiku",
      "description": "Manages feature flags for gradual feature releases",
      "triggers": ["feature flag", "toggle", "gradual release"]
    },
    "release-validator-agent": {
      "path": "agents/release-validator-agent.md",
      "model": "sonnet",
      "description": "Validates release readiness (tests, docs, approvals)",
      "triggers": ["validate release", "release check", "ready to ship"]
    }
  },

  "skills": {
    "semantic-versioning": {
      "path": "skills/semantic-versioning.md",
      "description": "SemVer parsing, comparison, and bump logic",
      "triggers": ["semver", "version", "bump", "major", "minor", "patch"]
    },
    "changelog-management": {
      "path": "skills/changelog-management.md",
      "description": "Changelog formatting, Keep a Changelog standard",
      "triggers": ["changelog", "keep a changelog", "CHANGELOG.md"]
    },
    "release-coordination": {
      "path": "skills/release-coordination.md",
      "description": "Cross-team release coordination and scheduling",
      "triggers": ["release schedule", "release coordination", "release window"]
    },
    "deployment-strategies": {
      "path": "skills/deployment-strategies.md",
      "description": "Blue-green, canary, rolling deployment patterns",
      "triggers": ["blue-green", "canary", "rolling", "deployment strategy"]
    },
    "rollback-procedures": {
      "path": "skills/rollback-procedures.md",
      "description": "Safe rollback procedures and verification",
      "triggers": ["rollback", "revert", "undo release"]
    }
  },

  "hooks": {
    "preRelease": {
      "script": "hooks/scripts/pre-release-checks.sh",
      "description": "Validates all release prerequisites (tests, docs, approvals)"
    },
    "postRelease": {
      "script": "hooks/scripts/post-release-notify.sh",
      "description": "Sends notifications and updates tracking systems"
    },
    "preDeployment": {
      "script": "hooks/scripts/pre-deployment-validate.sh",
      "description": "Validates deployment readiness and environment health"
    },
    "postDeployment": {
      "script": "hooks/scripts/post-deployment-verify.sh",
      "description": "Verifies deployment success and runs smoke tests"
    }
  },

  "templates": {
    "changelog": "templates/CHANGELOG.template.md",
    "releaseNotes": "templates/RELEASE_NOTES.template.md",
    "announcement": "templates/ANNOUNCEMENT.template.md",
    "hotfixProcedure": "templates/HOTFIX_PROCEDURE.template.md"
  },

  "permissions": {
    "filesystem": [
      { "path": "CHANGELOG.md", "access": "readwrite" },
      { "path": "RELEASE_NOTES.md", "access": "readwrite" },
      { "path": "package.json", "access": "readwrite" },
      { "path": "version.txt", "access": "readwrite" }
    ],
    "tools": ["Bash", "Read", "Write", "Edit", "Grep", "Glob", "Task"],
    "mcpServers": ["github"]
  },

  "configuration": {
    "schema": {
      "type": "object",
      "properties": {
        "versioningStrategy": {
          "type": "string",
          "enum": ["semver", "calver", "incremental"],
          "default": "semver"
        },
        "deploymentStrategy": {
          "type": "string",
          "enum": ["blue-green", "canary", "rolling", "recreate"],
          "default": "rolling"
        },
        "requireApproval": {
          "type": "boolean",
          "default": true
        },
        "autoChangelog": {
          "type": "boolean",
          "default": true
        },
        "linkToJira": {
          "type": "boolean",
          "default": true
        },
        "environments": {
          "type": "array",
          "items": { "type": "string" },
          "default": ["dev", "staging", "production"]
        }
      }
    }
  },

  "activation": {
    "auto": true,
    "priority": 800,
    "conditions": {
      "filePatterns": ["CHANGELOG.md", "RELEASE*.md", "version.*"],
      "keywords": ["release", "deploy", "version", "changelog", "rollback", "hotfix"]
    }
  }
}
